# 解构赋值 destructure（脱壳）

## 数组解构
- 对位解构
- 省略解构
- 嵌套数组解构
- 完全解构
- 保留数据结构解构
```javascript
let arr = [1, 2, 3] // 1 普通数组

let [a, b, c] = arr // 对位解构
let [,,c] = arr // 省略赋值，只取c位值

let arr2 = [ {name:'wjy', age:9}, [1,2], 3 ] // 2 复杂结构的数组
let [{name, age}, [d, e], f] = arr2  // 完全解构
let [json, arr3, f] = arr2 // 保留数据结构
```



## 对象解构

- 起别名
- 默认值
- 嵌套对象解构
```javascript
let obj1 = {name:'wjy', age:9} // 1 普通对象

let {name:myname, age:myage} = obj1 // 赋值到了 myname, myage， 起别名

let obj2 = {name:'wjy'} // 2 默认解构:若无对应值，则用默认值
let {name, age = 8} = obj2

const user = { // 3 嵌套对象解构
  id: 123,
  name: 'hehe',
  education: {
    degree: 'Masters'
  }
};
const {education: {degree} = {}} = user; // 解构了degree，同时设置{}缺省值
```



## 字符串解构

- 对位解构，起别名
- length 长度解构
```javascript
const [a, b, c, d, e] = 'hello';
a // "h"

// 还有个 length 属性，这里取名为 len
let {length: len} = 'hello';
len // 5
```



## 数值和布尔值的解构

> 若去结构数值或者布尔值，首先会将他们转换为包装对象， 如`Number, Boolean`。既然是包装对象，那么就会有一些原型上的静态方法

```javascript
let {toString: s} = 123;
s === Number.prototype.toString // true，把方法给解构出来了

let {toString: s} = true;
s === Boolean.prototype.toString // true

// undefined 和 null，无法被转换成对象。所以是报错的。
let { prop: x } = undefined; // TypeError
let { prop: y } = null; // TypeError
```



## 函数参数解构

```javascript
function add([x, y] = 0){ // 进来的是数组，但是被解构成了 x, y 变量
  return x + y;
}

add([1, 2]); // 3
```



## 解构场景

- 交换变量
- 解构函数返回值
- 函数参数的解构和定义
- 提取 JSON 数据
- 函数参数默认值：避免使用 x = 1 || null
- 遍历 Map 结构
- 模块的具名导入
```javascript
// 1 交换变量
let x=1, y=2;
[x,y] = [y,x]

// 2 解构函数返回值
function fn () {
  return {x, y}
}
let {x, y} = fn()

// 3 函数参数的解构和定义
function fn1([x, y, z]=[]) {
  console.log(...arguments)
}
function fn2({x, y, z}={}) {
  console.log(...arguments)
}
fn1([1,2,3])
fn2({z: 3, y: 2, x: 1})

// 4 提取 JSON 数据
let {x, y, y} = jsonData

// 5 函数参数默认值：避免使用 x = 1 || null
jQuery.ajax = function (url, {
  async = true,
  beforeSend = function () {},
  cache = true,
  complete = function () {},
  crossDomain = false,
  global = true,
  // ... more config
} = {}) {
  // ... do stuff
};

// 6 遍历 Map 结构
const map = new Map();
map.set('first', 'hello');
map.set('second', 'world');
for (let [key, value] of map) {} // 提取键值对
for (let [key] of map) {} // 提取 key
for (let [,value] of map) {} // 提取 value

// 7 模块的具名导入
const { SourceMapConsumer, SourceNode } = require("source-map");
```
