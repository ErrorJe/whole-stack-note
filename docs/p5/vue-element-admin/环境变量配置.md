# 环境变量配置



## 环境变量文件

在根目录下，创建的文件名如下。

我们需要为每一个可能出现的环境，单独创建一个文件，如 `.env.production` 表示在生产环境下应用

```javascript
// 特定模式的文件比 .env 文件优先级高
.env                # 在所有的环境中被载入
.env.[mode]         # 只在指定的模式中被载入
.env.local          # 在所有的环境中被载入，但会被 git 忽略
.env.[mode].local   # 只在指定的模式中被载入，但会被 git 忽略

// 比如我们创建一个用于开发环境的文件
.env.development
```



## 环境变量文件中的内容

只有各个变量的“键值对”，由于这是属于配置文件，所以更改后也是要重启服务的

```javascript
FOO=bar
VUE_APP_SECRET=secret
```

其中只有以 VUE_APP_* 开头 的变量会被 `webpack.DefinePlugin`插件注入到全局

```javascript
// 访问方式
console.log(process.env.VUE_APP_SECRET)

// 判断环境方式
process.env.NODE_ENV
```



## Vue-cli 下的三种模式

- `development` 模式用于 `vue-cli-service serve` 运行
- `production` 模式用于 `vue-cli-service build` 和 `vue-cli-service test:e2e` 构建
- `test` 模式用于 `vue-cli-service test:unit` 单测

> 使用 --mode 覆盖默认的模式， 在 package.json 中去配置


```json
"dev-build": "vue-cli-service build --mode development",
```
