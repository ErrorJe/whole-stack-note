<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>THIS 关键字 | FE 前端研究所</title>
    <meta name="description" content="ErrorJE 直辖 Blog | FE 前端研究所">
    <link rel="icon" href="/whole-stack-note/logo.jpg">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/whole-stack-note/assets/css/0.styles.966634b6.css" as="style"><link rel="preload" href="/whole-stack-note/assets/js/app.c175b9d2.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/2.6d170185.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/53.db0735be.js" as="script"><link rel="prefetch" href="/whole-stack-note/assets/js/10.ee1c1979.js"><link rel="prefetch" href="/whole-stack-note/assets/js/100.a45d7ecd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/101.7b8a4b2f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/102.4b2610e7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/11.2d3a5c7c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/12.698342be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/13.bba4ce64.js"><link rel="prefetch" href="/whole-stack-note/assets/js/14.514ef364.js"><link rel="prefetch" href="/whole-stack-note/assets/js/15.9717a3ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/16.eb42bdaa.js"><link rel="prefetch" href="/whole-stack-note/assets/js/17.dd0bd8ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/18.8ad9b54e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/19.74238fc3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/20.60f1a8a8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/21.c25bfdec.js"><link rel="prefetch" href="/whole-stack-note/assets/js/22.dbe12b43.js"><link rel="prefetch" href="/whole-stack-note/assets/js/23.679a0400.js"><link rel="prefetch" href="/whole-stack-note/assets/js/24.5479849d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/25.93a07ea9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/26.27d7e5ed.js"><link rel="prefetch" href="/whole-stack-note/assets/js/27.d8463591.js"><link rel="prefetch" href="/whole-stack-note/assets/js/28.2ba1e72e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/29.705178f1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/3.e21bb9ed.js"><link rel="prefetch" href="/whole-stack-note/assets/js/30.156c6952.js"><link rel="prefetch" href="/whole-stack-note/assets/js/31.3ace218a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/32.f9ccb391.js"><link rel="prefetch" href="/whole-stack-note/assets/js/33.e4d3e853.js"><link rel="prefetch" href="/whole-stack-note/assets/js/34.c5adedab.js"><link rel="prefetch" href="/whole-stack-note/assets/js/35.43e31ae5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/36.d84a5d2e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/37.7d9a7967.js"><link rel="prefetch" href="/whole-stack-note/assets/js/38.b8b67fe7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/39.b6e131dd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/4.bdffc1b6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/40.5278289f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/41.302b5328.js"><link rel="prefetch" href="/whole-stack-note/assets/js/42.736df250.js"><link rel="prefetch" href="/whole-stack-note/assets/js/43.dfc18400.js"><link rel="prefetch" href="/whole-stack-note/assets/js/44.bdf4cd45.js"><link rel="prefetch" href="/whole-stack-note/assets/js/45.8440854f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/46.978b71d6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/47.33aabefb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/48.6701ef33.js"><link rel="prefetch" href="/whole-stack-note/assets/js/49.6941dbdb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/5.8b0953b8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/50.b36bcf99.js"><link rel="prefetch" href="/whole-stack-note/assets/js/51.15699984.js"><link rel="prefetch" href="/whole-stack-note/assets/js/52.c7da722e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/54.247e3c4e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/55.d5f46d7d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/56.f4f16a12.js"><link rel="prefetch" href="/whole-stack-note/assets/js/57.104894bd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/58.5d1a37e7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/59.e170ac5f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/6.4336baf3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/60.a2ac5940.js"><link rel="prefetch" href="/whole-stack-note/assets/js/61.e2eac665.js"><link rel="prefetch" href="/whole-stack-note/assets/js/62.75c8391d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/63.cd8b9ee8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/64.a2e9d850.js"><link rel="prefetch" href="/whole-stack-note/assets/js/65.d32f90f1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/66.80a274a1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/67.7c1e35a0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/68.db994f15.js"><link rel="prefetch" href="/whole-stack-note/assets/js/69.f64b7345.js"><link rel="prefetch" href="/whole-stack-note/assets/js/7.e465b6ba.js"><link rel="prefetch" href="/whole-stack-note/assets/js/70.449023c5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/71.d90972ff.js"><link rel="prefetch" href="/whole-stack-note/assets/js/72.abfc7de6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/73.8798f46b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/74.10405a0a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/75.f4dc152e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/76.9e885d87.js"><link rel="prefetch" href="/whole-stack-note/assets/js/77.98b63b62.js"><link rel="prefetch" href="/whole-stack-note/assets/js/78.3a82b014.js"><link rel="prefetch" href="/whole-stack-note/assets/js/79.66e8bf47.js"><link rel="prefetch" href="/whole-stack-note/assets/js/8.78f506df.js"><link rel="prefetch" href="/whole-stack-note/assets/js/80.a90c418a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/81.2386d012.js"><link rel="prefetch" href="/whole-stack-note/assets/js/82.b6108b1b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/83.05df04e0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/84.7e37ba22.js"><link rel="prefetch" href="/whole-stack-note/assets/js/85.b7b87f39.js"><link rel="prefetch" href="/whole-stack-note/assets/js/86.26e1d68d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/87.d7be76f6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/88.34238cfc.js"><link rel="prefetch" href="/whole-stack-note/assets/js/89.6a2abc14.js"><link rel="prefetch" href="/whole-stack-note/assets/js/9.05ace5b0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/90.60370538.js"><link rel="prefetch" href="/whole-stack-note/assets/js/91.83bd8f62.js"><link rel="prefetch" href="/whole-stack-note/assets/js/92.73176f25.js"><link rel="prefetch" href="/whole-stack-note/assets/js/93.b46d9e51.js"><link rel="prefetch" href="/whole-stack-note/assets/js/94.29b46bfd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/95.dc7119dc.js"><link rel="prefetch" href="/whole-stack-note/assets/js/96.10b68212.js"><link rel="prefetch" href="/whole-stack-note/assets/js/97.775e29fe.js"><link rel="prefetch" href="/whole-stack-note/assets/js/98.b389a2b0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/99.320ef7b0.js">
    <link rel="stylesheet" href="/whole-stack-note/assets/css/0.styles.966634b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/whole-stack-note/" class="home-link router-link-active"><!----> <span class="site-name">FE 前端研究所</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/growth/" class="nav-link">程序员成长</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe/whole-stack-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/growth/" class="nav-link">程序员成长</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe/whole-stack-note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/whole-stack-note/p4/javascript/" class="sidebar-link">JS 历史和介绍</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据类型</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/数据类型/00 数据类型.html" class="sidebar-link">JS 数据类型</a></li><li><a href="/whole-stack-note/p4/javascript/数据类型/01 数据类型判断.html" class="sidebar-link">数据类型判断</a></li><li><a href="/whole-stack-note/p4/javascript/数据类型/02 数据类型转换.html" class="sidebar-link">数据类型转换</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>执行机制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/执行机制/01 事件机制.html" class="sidebar-link">事件机制</a></li><li><a href="/whole-stack-note/p4/javascript/执行机制/02 作用域.html" class="sidebar-link">作用域</a></li><li><a href="/whole-stack-note/p4/javascript/执行机制/03 内存管理.html" class="sidebar-link">内存管理</a></li><li><a href="/whole-stack-note/p4/javascript/执行机制/04 闭包.html" class="sidebar-link">闭包</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>堆栈内存和作用域</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/堆栈内存和作用域/堆栈内存.html" class="sidebar-link">堆栈内存机制</a></li><li><a href="/whole-stack-note/p4/javascript/堆栈内存和作用域/作用域.html" class="sidebar-link">作用域和执行上下文</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面向对象</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/面向对象/01 面向对象基础.html" class="sidebar-link">面向对象基础</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/02 原始类型和引用对象.html" class="sidebar-link">原始类型和引用对象</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/03 函数.html" class="sidebar-link">函数</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/04 对象.html" class="sidebar-link">理解对象</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/05 构造函数和原型.html" class="sidebar-link">构造函数和原型对象</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html" class="sidebar-link">继承方案</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/07 对象模式.html" class="sidebar-link">对象模式</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html" class="active sidebar-link">THIS 关键字</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#函数种类" class="sidebar-link">函数种类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#普通函数-function" class="sidebar-link">普通函数 function</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#箭头函数" class="sidebar-link">箭头函数 =&gt;</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#生成器-function" class="sidebar-link">生成器 function*</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#类-class" class="sidebar-link">类 class</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#方法-class" class="sidebar-link">方法 class</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#异步函数-async" class="sidebar-link">异步函数 async</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#this-的行为" class="sidebar-link">this 的行为</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#普通函数行为" class="sidebar-link">普通函数行为</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#箭头函数行为" class="sidebar-link">箭头函数行为</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#方法行为" class="sidebar-link">方法行为</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#this-的机制" class="sidebar-link">this 的机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#this-的指向规则" class="sidebar-link">this 的指向规则</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#严格模式下的-this" class="sidebar-link">严格模式下的 this</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#嵌套函数中的-this" class="sidebar-link">嵌套函数中的 this</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#执行上下文" class="sidebar-link">执行上下文</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#基本概念" class="sidebar-link">基本概念</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#代码执行的两个阶段" class="sidebar-link">代码执行的两个阶段</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html#执行上下文的调用栈" class="sidebar-link">执行上下文的调用栈</a></li></ul></li></ul></li><li><a href="/whole-stack-note/p4/javascript/面向对象/09 this 内置函数.html" class="sidebar-link">call, apply 和 bind</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/10 this 应用实例.html" class="sidebar-link">THIS 应用实例</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>异步编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" class="sidebar-link">异步基础知识</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/高阶函数.html" class="sidebar-link">高阶函数与 AOP</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/异步解决方案.html" class="sidebar-link">异步解决方案总结</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/Promise 核心.html" class="sidebar-link">Promise 核心应用</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/Event Loop.html" class="sidebar-link">Event Loop</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="this-关键字"><a href="#this-关键字" class="header-anchor">#</a> THIS 关键字</h1> <p>this 是 JS 执行上下文中很重要的一个组成部分。同个函数调用方式不同，this的值也不同（动态变化）。</p> <h2 id="函数种类"><a href="#函数种类" class="header-anchor">#</a> 函数种类</h2> <p>切换上下文的场景就是函数的调用。首先要认识下函数的类别</p> <p>this 是在代码运行时绑定的，而不是定义时。</p> <p>它的上下文对象取决于函数调用时的各种条件。</p> <h3 id="普通函数-function"><a href="#普通函数-function" class="header-anchor">#</a> 普通函数 function</h3> <blockquote><p>function 关键词定义的函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// code }</span>
</code></pre></div><h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数 =&gt;</h3> <blockquote><p>用 =&gt; 运算符定义的函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// code }</span>
</code></pre></div><h3 id="生成器-function"><a href="#生成器-function" class="header-anchor">#</a> 生成器 function*</h3> <blockquote><p>function* 定义的函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> foo<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// code }</span>
</code></pre></div><h3 id="类-class"><a href="#类-class" class="header-anchor">#</a> 类 class</h3> <blockquote><p>类实际也是个函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// code }</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="方法-class"><a href="#方法-class" class="header-anchor">#</a> 方法 class</h3> <blockquote><p>在类 class 中定义的函数</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// code}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="异步函数-async"><a href="#异步函数-async" class="header-anchor">#</a> 异步函数 async</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span><span class="token number">1</span> 普通函数异步
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//2 箭头函数异步</span>
<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//3 生成器函数异步</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> foo<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="this-的行为"><a href="#this-的行为" class="header-anchor">#</a> this 的行为</h2> <p>对this的本质解释：调用函数时使用的引用（注意是引用，而不是对象），决定了函数执行时刻的this。</p> <p>也就是说，this的指向，是在调用函数时根据执行上下文所动态确定的。</p> <h3 id="普通函数行为"><a href="#普通函数行为" class="header-anchor">#</a> 普通函数行为</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 在某对象中定义方法， 采用键值对的方式</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  showThis<span class="token operator">:</span> showThis
<span class="token punctuation">}</span>

<span class="token comment">// 2 普通函数</span>
<span class="token keyword">function</span> <span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 因为这里的 this 会根据环境变化，所以采用的方式是缓存</span>
  <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 当作普通函数被调用， this 挂载到全局 global 上</span>
o<span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 被当作方法调用， this 指向掉用方法的对象 o</span>
</code></pre></div><h3 id="箭头函数行为"><a href="#箭头函数行为" class="header-anchor">#</a> 箭头函数行为</h3> <p>无论什么引用调用函数，都不改变 <code>this</code> 值。箭头函数在定义时就决定了 <code>this</code> 的值</p> <p>因为箭头函数的 <code>this</code> 在创建该函数的时候就已经确定且不能更改，指向的是外层函数的 <code>this</code> 指向。</p> <p>若没有外层函数，则指向 <code>window</code>，也就是全局</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">showThis</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  showThis<span class="token operator">:</span> showThis
<span class="token punctuation">}</span>

<span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// global</span>
o<span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// global</span>
</code></pre></div><h3 id="方法行为"><a href="#方法行为" class="header-anchor">#</a> 方法行为</h3> <p>函数和方法不太一样。还要遵循上面对 <code>this</code> 的本质解释</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
  <span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> showThis <span class="token operator">=</span> o<span class="token punctuation">.</span>showThis<span class="token punctuation">;</span>

<span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined。“showThis是一个变量，他的引用不是一个对象，所以是undefined”</span>
windiw<span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  window</span>
o<span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// o。this指向了被实例出来的对象o</span>
</code></pre></div><h2 id="this-的机制"><a href="#this-的机制" class="header-anchor">#</a> this 的机制</h2> <p>在 JS 中，函数中有个私有属性来保存 this 信息，<code>[[Environment]]</code>。</p> <p>另外，还有一个私有属性来规定 this 的使用模式， <code>[[thisMode]]</code>， 他有3个值</p> <ul><li><p><code>lexical</code>, 从上下文中找 this，就是箭头函数</p></li> <li><p><code>global</code>，当 this 为 undefined 时取全局对象，就是普通函数</p></li> <li><p><code>strict</code>，严格模式，this 严格按照传入的值，可能为 <code>null</code> 或 <code>undefined</code>。class 就是按照这个模式</p></li></ul> <h3 id="this-的指向规则"><a href="#this-的指向规则" class="header-anchor">#</a> this 的指向规则</h3> <p>切换上下文的动作，实际上是在创建一条新的执行环境记录时，记录的外层词法环境会被设置成 <code>[[Environment]]</code></p> <p>而调用函数时，就会创建函数自身的执行上下文，该阶段决定了 this 的指向。下面是具体的环节和规则：</p> <ul><li><p>作为函数调用时，如 <code>fn()</code></p></li> <li><ul><li>严格模式下，<code>this</code> 绑定到 <code>undefined</code></li> <li>非严格模式下表，绑定到全局对象 <code>window</code>/<code>global</code></li></ul></li> <li><p>由上下文对象调用时，如调用对象方法，<code>obj.fn()</code></p></li> <li><ul><li>绑定到该 obj 对象上</li></ul></li> <li><p>构造函数 new 调用时，绑定到被创建的实例对象上</p></li> <li><p>箭头函数，根据定义时外层上下文绑定的 this 决定 this 指向</p></li> <li><p>由 <code>call/apply/bind</code> 方法显式调用，绑定到指定参数的对象上</p></li></ul> <h3 id="严格模式下的-this"><a href="#严格模式下的-this" class="header-anchor">#</a> 严格模式下的 this</h3> <p>在JS中，this不能被修改，不能被继承。</p> <ul><li>若嵌套函数是<strong>作为方法调用</strong>，this 指代调用方法的对象。</li> <li>若嵌套函数是<strong>作为函数使用</strong>， this 指代全局对象 <code>window/global</code>（非严格模式下）或者是 <code>undefined</code>（严格模式下,<code>use strict</code>）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;use strict&quot;</span>
<span class="token keyword">function</span> <span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  showThis<span class="token operator">:</span> showThis
<span class="token punctuation">}</span>

<span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined。严格模式下认为，没有对象去引用这个函数。当非严格模式下，会自动取全局作为this</span>
o<span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// o</span>
</code></pre></div><h3 id="嵌套函数中的-this"><a href="#嵌套函数中的-this" class="header-anchor">#</a> 嵌套函数中的 this</h3> <ul><li>最外层是普通函数， o.foo()。o对象的foo方法调用</li> <li>第二层是箭头函数，foo()函数返回了一个箭头函数</li> <li>第三层同第二次原理</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
o<span class="token punctuation">.</span><span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对象o引用是该this</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绑定了上层 this， 也就是 o 对象</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 同理</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

o<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// o, o, o，都是返回对象o</span>
</code></pre></div><h4 id="var-that-this-技巧"><a href="#var-that-this-技巧" class="header-anchor">#</a> var that = this 技巧</h4> <p>this 是 JS 的一个关键字，在函数运行时，自动生成的一个内部对象 ，this 代表的是当前对象，只能在函数内部使用。</p> <p>常见用法 <code>var that = this</code>， 就是把当前的 this 对象赋值一份到 that变量中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>‘#conten '<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//this是被点击的#conten</span>
  <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span>‘<span class="token punctuation">.</span>conten'<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//this是.conten循环中当前的对象</span>
    <span class="token comment">//that仍然是刚才被点击的#conten</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>因为 this 是会随着对象的改变而动态发生变化的，所以用这种方法可以保留之前的那个对象。</p> <h4 id="误解：在子函数中的this指代父函数本身"><a href="#误解：在子函数中的this指代父函数本身" class="header-anchor">#</a> 误解：在子函数中的this指代父函数本身</h4> <blockquote><p>在嵌套函数中，误认为在子函数中的this指代父函数本身</p></blockquote> <p>实际上，我们在父函数中通过将this赋值于某一变量，然后在子函数中进行使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token comment">// ==&gt; 将method方法的This值保存，指代obj对象</span>
    <span class="token keyword">function</span> <span class="token function">fun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ==&gt; 定义嵌套函数</span>
      <span class="token keyword">this</span> <span class="token comment">// ==&gt; 全局对象或者是undefined</span>
      that <span class="token comment">// ==&gt; 外部函数的this值，也就是obj对象</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="执行上下文"><a href="#执行上下文" class="header-anchor">#</a> 执行上下文</h2> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <blockquote><p>JS中执行所需要的所有信息定位</p> <p>下文也就是在程序、函数、代码执行时的有效环境。也就是函数调用栈</p></blockquote> <p>虽然与作用域链相辅相成，但是是完全不同的两个概念。执行上下文包含了作用域链</p> <p>执行上下文包括</p> <ul><li>变量对象</li> <li>作用域链</li> <li>this的指向</li></ul> <h3 id="代码执行的两个阶段"><a href="#代码执行的两个阶段" class="header-anchor">#</a> 代码执行的两个阶段</h3> <h4 id="预编译阶段"><a href="#预编译阶段" class="header-anchor">#</a> 预编译阶段</h4> <p>是前置阶段，由编译器将JS代码编译成可执行的代码。</p> <ul><li>变量提升：会对变量的内存空间进行分配</li></ul> <p>尽管JS是编译一行执行一行的解释型语言，但是在代码执行前，仍然会作一些预处理。</p> <ul><li>进行变量声明和变量提升，但是值为 undefined</li> <li>所有非表达式的函数声明进行提升，也就是提升 function 关键字开头声明的函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// ==&gt;相当于</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> bar <span class="token comment">// 重复声明，被忽略</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// bar1</span>
<span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 按照代码执行顺序，开始赋值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// bar2</span>
</code></pre></div><p>所以，函数调用开始创建执行上下文，在预编译阶段确定了作用域</p> <h4 id="执行阶段"><a href="#执行阶段" class="header-anchor">#</a> 执行阶段</h4> <p>整个JS引擎的执行步骤：也就是在函数调用时，创建了这个执行上下文</p> <ul><li>预编译时，创建未赋值的变量对象 VO</li> <li>代码执行，VO赋值转为激活对象AO。此时作用域链确定，保证了变量和函数的有序访问</li> <li>若在当前作用域中无法找到变量或函数，则沿着作用域链一直找</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// foo.js</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  foo
<span class="token punctuation">}</span>

<span class="token comment">// test.js</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>'<span class="token punctuation">.</span><span class="token operator">/</span>foo<span class="token punctuation">.</span>js<span class="token punctuation">)</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 2。foo()能够访问定义时就存在的b</span>
<span class="token comment">// error。无法访问a，那时候还没有a的定义</span>
</code></pre></div><h3 id="执行上下文的调用栈"><a href="#执行上下文的调用栈" class="header-anchor">#</a> 执行上下文的调用栈</h3> <p>调用栈，就是函数之间的互相调用</p> <p>单线程就是用 栈（先进后出） 这个数据结构实现的</p> <p>JS用栈结构来管理函数的每层上下文，即函数调用时每出现一个层级的上下文环境就压栈，栈中每一项目又包含一个链表。函数结束时，执行上下文被出栈。</p> <p><img src="https://raw.githubusercontent.com/ErrorJe/ErrorJE.github.io/images/img/20200120105418.png" alt=""></p> <p>刚开始，是window作为作用域，按照顺序执行代码。一旦进入一个新的作用域如函数区块，就会先去执行函数里这个上下文环境。</p> <p>从原理上来说就是讲这个函数的执行下上文压栈到栈顶，然后执行完后抛出，再回到window的执行上下文。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">lg</span><span class="token punctuation">(</span><span class="token string">'foo4'</span><span class="token punctuation">)</span> <span class="token comment">// 故意写错，可以在报错中看调用顺序</span>
<span class="token punctuation">}</span>
<span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这里的调用关系</p> <div class="language-js extra-class"><pre class="language-js"><code>foo1 <span class="token operator">-</span><span class="token operator">&gt;</span> foo2 <span class="token operator">-</span><span class="token operator">&gt;</span> foo3 <span class="token operator">-</span><span class="token operator">&gt;</span> foo4 <span class="token comment">// 这也是入栈的顺序，foo1 入栈</span>
foo4 执行完后，先出栈
</code></pre></div><p>上面估计将 foo4 写错，可以去chrome看报错和调用栈</p> <blockquote><p>就是一个竖直的栈结构</p></blockquote> <p><img src="https://raw.githubusercontent.com/ErrorJe/ErrorJE.github.io/images/img/20200120105658.png" alt=""></p> <p>还可以通过断点到 call stack 中去看调用栈</p> <p><img src="https://raw.githubusercontent.com/ErrorJe/ErrorJE.github.io/images/img/20200120105713.png" alt=""></p> <p>当函数执行完毕，就会出栈，然后会被垃圾回收，相关的上下文被销毁。所以外界无法访问函数内的变量。</p> <p>该变量在预编译时给予内存空间创建，执行时激活可以使用，在函数执行完毕后，相关上下文被销毁。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ErrorJe/whole-stack-note/edit/gh-pages/p4/javascript/面向对象/08 this 关键字.md" target="_blank" rel="noopener noreferrer">编辑文档</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/20/2020, 8:34:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/whole-stack-note/p4/javascript/面向对象/07 对象模式.html" class="prev">对象模式</a></span> <span class="next"><a href="/whole-stack-note/p4/javascript/面向对象/09 this 内置函数.html">call, apply 和 bind</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/whole-stack-note/assets/js/app.c175b9d2.js" defer></script><script src="/whole-stack-note/assets/js/2.6d170185.js" defer></script><script src="/whole-stack-note/assets/js/53.db0735be.js" defer></script>
  </body>
</html>
