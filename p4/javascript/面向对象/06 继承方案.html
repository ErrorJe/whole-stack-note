<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>继承方案 | FE 前端研究所</title>
    <meta name="description" content="ErrorJE 直辖 Blog">
    <link rel="icon" href="/whole-stack-note/logo.jpg">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/whole-stack-note/assets/css/0.styles.966634b6.css" as="style"><link rel="preload" href="/whole-stack-note/assets/js/app.386e2e00.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/2.6d170185.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/51.15699984.js" as="script"><link rel="prefetch" href="/whole-stack-note/assets/js/10.ee1c1979.js"><link rel="prefetch" href="/whole-stack-note/assets/js/100.2427fafa.js"><link rel="prefetch" href="/whole-stack-note/assets/js/101.0030ecb0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/11.2d3a5c7c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/12.698342be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/13.bba4ce64.js"><link rel="prefetch" href="/whole-stack-note/assets/js/14.514ef364.js"><link rel="prefetch" href="/whole-stack-note/assets/js/15.9717a3ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/16.eb42bdaa.js"><link rel="prefetch" href="/whole-stack-note/assets/js/17.dd0bd8ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/18.8ad9b54e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/19.74238fc3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/20.60f1a8a8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/21.c25bfdec.js"><link rel="prefetch" href="/whole-stack-note/assets/js/22.dbe12b43.js"><link rel="prefetch" href="/whole-stack-note/assets/js/23.a0cb54ad.js"><link rel="prefetch" href="/whole-stack-note/assets/js/24.dad8f402.js"><link rel="prefetch" href="/whole-stack-note/assets/js/25.6c58262c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/26.c9172401.js"><link rel="prefetch" href="/whole-stack-note/assets/js/27.d8463591.js"><link rel="prefetch" href="/whole-stack-note/assets/js/28.2ba1e72e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/29.705178f1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/3.e21bb9ed.js"><link rel="prefetch" href="/whole-stack-note/assets/js/30.156c6952.js"><link rel="prefetch" href="/whole-stack-note/assets/js/31.3ace218a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/32.f9ccb391.js"><link rel="prefetch" href="/whole-stack-note/assets/js/33.e4d3e853.js"><link rel="prefetch" href="/whole-stack-note/assets/js/34.c5adedab.js"><link rel="prefetch" href="/whole-stack-note/assets/js/35.43e31ae5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/36.d84a5d2e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/37.7d9a7967.js"><link rel="prefetch" href="/whole-stack-note/assets/js/38.b8b67fe7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/39.b6e131dd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/4.a23040bc.js"><link rel="prefetch" href="/whole-stack-note/assets/js/40.5278289f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/41.302b5328.js"><link rel="prefetch" href="/whole-stack-note/assets/js/42.736df250.js"><link rel="prefetch" href="/whole-stack-note/assets/js/43.dfc18400.js"><link rel="prefetch" href="/whole-stack-note/assets/js/44.bdf4cd45.js"><link rel="prefetch" href="/whole-stack-note/assets/js/45.8440854f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/46.978b71d6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/47.33aabefb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/48.6701ef33.js"><link rel="prefetch" href="/whole-stack-note/assets/js/49.6941dbdb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/5.8b0953b8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/50.b36bcf99.js"><link rel="prefetch" href="/whole-stack-note/assets/js/52.c7da722e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/53.db0735be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/54.6fd68dbb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/55.cee48877.js"><link rel="prefetch" href="/whole-stack-note/assets/js/56.154d093b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/57.8bd50fe4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/58.686ea3e6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/59.e170ac5f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/6.4336baf3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/60.a2ac5940.js"><link rel="prefetch" href="/whole-stack-note/assets/js/61.e2eac665.js"><link rel="prefetch" href="/whole-stack-note/assets/js/62.75c8391d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/63.43dd3a32.js"><link rel="prefetch" href="/whole-stack-note/assets/js/64.4d605da9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/65.02dde5d5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/66.58bd1260.js"><link rel="prefetch" href="/whole-stack-note/assets/js/67.51798668.js"><link rel="prefetch" href="/whole-stack-note/assets/js/68.df0ef085.js"><link rel="prefetch" href="/whole-stack-note/assets/js/69.a551a72b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/7.e465b6ba.js"><link rel="prefetch" href="/whole-stack-note/assets/js/70.d626fecf.js"><link rel="prefetch" href="/whole-stack-note/assets/js/71.a180d067.js"><link rel="prefetch" href="/whole-stack-note/assets/js/72.03ebe3f7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/73.c2df73ec.js"><link rel="prefetch" href="/whole-stack-note/assets/js/74.4eb2026f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/75.fe11804c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/76.fd60ecd6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/77.ba396b06.js"><link rel="prefetch" href="/whole-stack-note/assets/js/78.6e6aefb5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/79.233a6f74.js"><link rel="prefetch" href="/whole-stack-note/assets/js/8.222b3810.js"><link rel="prefetch" href="/whole-stack-note/assets/js/80.d41d146c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/81.887086f4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/82.be84b238.js"><link rel="prefetch" href="/whole-stack-note/assets/js/83.df6fa9f1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/84.b551aea8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/85.f42f4924.js"><link rel="prefetch" href="/whole-stack-note/assets/js/86.d3039e9a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/87.dd22dc96.js"><link rel="prefetch" href="/whole-stack-note/assets/js/88.1b09c783.js"><link rel="prefetch" href="/whole-stack-note/assets/js/89.f85a6ad9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/9.7a222e22.js"><link rel="prefetch" href="/whole-stack-note/assets/js/90.23b01315.js"><link rel="prefetch" href="/whole-stack-note/assets/js/91.c9056ffe.js"><link rel="prefetch" href="/whole-stack-note/assets/js/92.be511897.js"><link rel="prefetch" href="/whole-stack-note/assets/js/93.dd239170.js"><link rel="prefetch" href="/whole-stack-note/assets/js/94.ef196c74.js"><link rel="prefetch" href="/whole-stack-note/assets/js/95.b93789a9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/96.3af32f62.js"><link rel="prefetch" href="/whole-stack-note/assets/js/97.be8eca0c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/98.4d18836d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/99.c9472643.js">
    <link rel="stylesheet" href="/whole-stack-note/assets/css/0.styles.966634b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/whole-stack-note/" class="home-link router-link-active"><!----> <span class="site-name">FE 前端研究所</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/whole-stack-note/p4/javascript/" class="sidebar-link">JS 历史和介绍</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据类型</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/数据类型/00 数据类型.html" class="sidebar-link">JS 数据类型</a></li><li><a href="/whole-stack-note/p4/javascript/数据类型/01 数据类型判断.html" class="sidebar-link">数据类型判断</a></li><li><a href="/whole-stack-note/p4/javascript/数据类型/02 数据类型转换.html" class="sidebar-link">数据类型转换</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>执行机制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/执行机制/01 事件机制.html" class="sidebar-link">事件机制</a></li><li><a href="/whole-stack-note/p4/javascript/执行机制/02 作用域.html" class="sidebar-link">作用域</a></li><li><a href="/whole-stack-note/p4/javascript/执行机制/03 内存管理.html" class="sidebar-link">内存管理</a></li><li><a href="/whole-stack-note/p4/javascript/执行机制/04 闭包.html" class="sidebar-link">闭包</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>堆栈内存和作用域</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/堆栈内存和作用域/堆栈内存.html" class="sidebar-link">堆栈内存机制</a></li><li><a href="/whole-stack-note/p4/javascript/堆栈内存和作用域/作用域.html" class="sidebar-link">作用域和执行上下文</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面向对象</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/面向对象/01 面向对象基础.html" class="sidebar-link">面向对象基础</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/02 原始类型和引用对象.html" class="sidebar-link">原始类型和引用对象</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/03 函数.html" class="sidebar-link">函数</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/04 对象.html" class="sidebar-link">理解对象</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/05 构造函数和原型.html" class="sidebar-link">构造函数和原型对象</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html" class="active sidebar-link">继承方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#原型链和-object-prototype" class="sidebar-link">原型链和 Object.prototype</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#原型链" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#object-prototype" class="sidebar-link">Object.prototype</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#object-原型对象常用的方法" class="sidebar-link">Object 原型对象常用的方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#对象继承" class="sidebar-link">对象继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#object-create-继承创建对象" class="sidebar-link">Object.create 继承创建对象</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#构造函数继承" class="sidebar-link">构造函数继承</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#构造函数的窃取（伪类继承）" class="sidebar-link">构造函数的窃取（伪类继承）</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#访问父类方法" class="sidebar-link">访问父类方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#类的继承方案" class="sidebar-link">类的继承方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#原型链继承" class="sidebar-link">原型链继承</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#构造函数继承-2" class="sidebar-link">构造函数继承</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#组合继承" class="sidebar-link">组合继承</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#继承-date" class="sidebar-link">继承 Date</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/javascript/面向对象/06 继承方案.html#es6-继承方案" class="sidebar-link">ES6 继承方案</a></li></ul></li></ul></li><li><a href="/whole-stack-note/p4/javascript/面向对象/07 对象模式.html" class="sidebar-link">对象模式</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/08 this 关键字.html" class="sidebar-link">THIS 关键字</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/09 this 内置函数.html" class="sidebar-link">call, apply 和 bind</a></li><li><a href="/whole-stack-note/p4/javascript/面向对象/10 this 应用实例.html" class="sidebar-link">THIS 应用实例</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>异步编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/whole-stack-note/p4/javascript/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/" class="sidebar-link">异步基础知识</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/高阶函数.html" class="sidebar-link">高阶函数与 AOP</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/异步解决方案.html" class="sidebar-link">异步解决方案总结</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/Promise 核心.html" class="sidebar-link">Promise 核心应用</a></li><li><a href="/whole-stack-note/p4/javascript/异步编程/Event Loop.html" class="sidebar-link">Event Loop</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="继承方案"><a href="#继承方案" class="header-anchor">#</a> 继承方案</h1> <p>JS 的继承方式是基于原型对象的。</p> <h2 id="原型链和-object-prototype"><a href="#原型链和-object-prototype" class="header-anchor">#</a> 原型链和 Object.prototype</h2> <h3 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h3> <p>原型对象的属性和方法，可以被对象实例给访问，这就是继承的体现。</p> <p>原型对象也是对象，也有属于自己的上级原型对象，以此类推形成<code>原型对象链</code>。</p> <h3 id="object-prototype"><a href="#object-prototype" class="header-anchor">#</a> Object.prototype</h3> <p>所有以字面量形式创建的对象 <code>let obj = {}</code>，其原型对象都是 <code>Object.prototype</code>，也即是该对象的<code>[[Prototype]]</code>值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre></div><h3 id="object-原型对象常用的方法"><a href="#object-原型对象常用的方法" class="header-anchor">#</a> Object 原型对象常用的方法</h3> <blockquote><p>尽量不要去修改 <code>Object.prototype</code> 上的属性或方法。如果增加了，则默认是可枚举。</p> <p>那么在 for-in 语句中最好搭配判断 <code>Object.hasOwnProperty</code></p></blockquote> <h4 id="valueof"><a href="#valueof" class="header-anchor">#</a> valueOf</h4> <p>在对象上使用<code>操作符</code>时，就会默认调用 <code>valueOf</code>方法，且默认返回对象实例本身。对不同类型的数据做出不同的反应</p> <ul><li>String 类型，返回字符串</li> <li>Boolean 类型，返回布尔</li> <li>Number 类型，返回数字</li> <li>Date 类型，返回 epoch 时间，单位是毫秒</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Data</span> <span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>其实可以自定义 valueOf 方法，也就是去重写他。</p> <h4 id="tostring"><a href="#tostring" class="header-anchor">#</a> toString</h4> <p>当 <code>valueOf</code> 返回的是一个引用而不是原始值的时候，就会回退调用 <code>toString</code>方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">'this is'</span> <span class="token operator">+</span> obj  <span class="token comment">// 'this is [object object]' 自动调用 toString</span>
</code></pre></div><p>当然也可以重写该方法</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token string">'toString'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token string">'this is'</span> <span class="token operator">+</span> obj  <span class="token comment">// 'this is toString'</span>
</code></pre></div><h2 id="对象继承"><a href="#对象继承" class="header-anchor">#</a> 对象继承</h2> <p>就是指定新对象的 <code>[[Prototype]]</code>是哪个父对象。</p> <ul><li>Object.prototype 是对象字面量形式默认的</li> <li>Object.create 可以显式指定</li></ul> <h3 id="object-create-继承创建对象"><a href="#object-create-继承创建对象" class="header-anchor">#</a> Object.create 继承创建对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 参数1：指定新对象的 [[Prototype]] 属性</span>
<span class="token comment">// 参数2：就是对象特征的描述</span>

<span class="token comment">// 1 字面量形式创建。自动继承于 Object.prototype</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  msg<span class="token operator">:</span><span class="token string">'wjy'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2 使用 create 方法创建 obj</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  msg<span class="token operator">:</span><span class="token punctuation">{</span>
    value<span class="token operator">:</span><span class="token string">'wjy'</span><span class="token punctuation">,</span>
    writable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>创造出一个没有原型对象的对象</p> <p><code>let obj = Object.create(null)</code> 意味着如 toString 之类的方法都不存在了，只是一个哈希容器。也没有别的用处</p> <h3 id="构造函数继承"><a href="#构造函数继承" class="header-anchor">#</a> 构造函数继承</h3> <h4 id="构造函数的-js-机制"><a href="#构造函数的-js-机制" class="header-anchor">#</a> 构造函数的 JS 机制</h4> <ul><li>默认继承于 Object.prototype</li> <li>重置 constructor 属性为自己</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 自己创建的构造函数</span>
<span class="token keyword">function</span> <span class="token function">myConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 2 JS 引擎底部做的事。</span>
<span class="token comment">// 默认继承于 Object.prototype,</span>
myConstructor<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 重置 constructor 属性为自己</span>
  constructor<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span>myConstructor<span class="token punctuation">,</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    writable<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="改写-prototype-实现继承"><a href="#改写-prototype-实现继承" class="header-anchor">#</a> 改写 prototype 实现继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 创建 2 个构造函数</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
obj1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 2 实现继承</span>
<span class="token comment">// constructor 是 xxx.prototype 原型对象的属性</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 此时 constructor 为 Father</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son <span class="token comment">// 将 constructor 重置回自己</span>
</code></pre></div><p>事实上， Son 对于继承唯一需要关心的是原型对象要指向 <code>Father</code>。</p> <ul><li>这里需要注意，如果在 Son 的原型对象上要新增方法，必须在完成继承之后。不然之前的都会被丢失</li></ul> <p>那么就可以用 <code>Object.create</code>来简化。</p> <p>对比上面的实现，会出现调用 <code>new Father</code> 时若有初始参数的传入要求，但是没有传会出现报错。现在这种方法就可以避免（没有调用父类构造函数来初始化）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 创建 2 个构造函数</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
obj1<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 2 用 Object.create 简化代码</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span>Son<span class="token punctuation">,</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    writable<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="构造函数的窃取（伪类继承）"><a href="#构造函数的窃取（伪类继承）" class="header-anchor">#</a> 构造函数的窃取（伪类继承）</h3> <p>JS 的继承是通过原型链实现的，所以不用调用对象的父类构造函数。</p> <p>若确实有这个需要，就要利用 JS 函数工作的特性。如 <code>call, apply</code>方法。模仿那些基于类的语言的类继承。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 创建 2 个构造函数</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">length<span class="token punctuation">,</span>width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length
  <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width
<span class="token punctuation">}</span>

<span class="token comment">// 2 在子类中调用父类构造方法</span>
<span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3 实现继承</span>
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span>Son<span class="token punctuation">,</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    writable<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 4 创建实例</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">// son.length = 6; son.width = 6</span>
</code></pre></div><h3 id="访问父类方法"><a href="#访问父类方法" class="header-anchor">#</a> 访问父类方法</h3> <p>ES6 之前没有 <code>super</code> 关键词，还是依靠 call, apply 等方法在调用父类原型对象中的方法时使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// 拿到父类 toString 方法</span>
  <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'Father'</span><span class="token punctuation">,</span> <span class="token string">'Son'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="类的继承方案"><a href="#类的继承方案" class="header-anchor">#</a> 类的继承方案</h2> <h3 id="原型链继承"><a href="#原型链继承" class="header-anchor">#</a> 原型链继承</h3> <h4 id="实现关键"><a href="#实现关键" class="header-anchor">#</a> 实现关键</h4> <p>实现原型链实现继承关键要点是</p> <p>这样的实现，不同的 <code>Child 实例</code>的 <code>__proto__</code> 会引用同一 <code>Parent</code> 的实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="方式一：proto-属性"><a href="#方式一：proto-属性" class="header-anchor">#</a> 方式一：proto 属性</h4> <blockquote><p>直接修改了 <code>__proto__</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 子类借用父类的构造方法，实现继承实例属性</span>
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 修复原型对象（Cat 拥有自己的原型对象）</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype
</code></pre></div><h4 id="方式二：setprototypeof-优化"><a href="#方式二：setprototypeof-优化" class="header-anchor">#</a> 方式二：setPrototypeOf 优化</h4> <p>跟方式一是一样的，只是我们用新的 API 取代之前对 <code>__proto__</code> 属性的直接改写</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre></div><h4 id="方式三：object-create"><a href="#方式三：object-create" class="header-anchor">#</a> 方式三：Object.create</h4> <blockquote><p>创建一个新的对象，作为子类的原型对象</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">parentPrototype</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> parentPrototype <span class="token comment">// 借用父类原型对象</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  obj<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Cat <span class="token comment">// 实例上增加 constructor ，就不会继续向上找</span>
  <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>
<span class="token class-name">Cat</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre></div><h3 id="构造函数继承-2"><a href="#构造函数继承-2" class="header-anchor">#</a> 构造函数继承</h3> <h4 id="实现关键-2"><a href="#实现关键-2" class="header-anchor">#</a> 实现关键</h4> <p>这样的实现问题也比较大，其实只是实现了实例属性继承，Parent 原型的方法在 Child 实例中并不可用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Child</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="实现方案"><a href="#实现方案" class="header-anchor">#</a> 实现方案</h4> <p>核心代码：<code>Parent.call(this, args)</code></p> <p>不管是使用 call 还是 apply 方法，通过调用 student 的构造函数，其实并没有产生继承关系</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> props<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">'Unnamed'</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 在原型对象上增加属性 height </span>

<span class="token comment">// 继承实现方法</span>
<span class="token keyword">function</span> <span class="token function">PrimaryStudent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Student</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token comment">// 调用Student构造函数，绑定This变量( PrimaryStudent 实例)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> props<span class="token punctuation">.</span>grade <span class="token operator">||</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrimaryStudent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 新建 PrimaryStudent 实例</span>

p<span class="token punctuation">.</span>height <span class="token comment">// undefined，所以是不能调用Student.prototype定义的方法</span>
</code></pre></div><p>Student 并没有被继承，而是被扩展成了 PrimaryStudent 。</p> <p>因为改写的是“this”，最后所谓继承到的东西是 student 实例中可以拥有的东西（就是直接写在构造函数内的，而不是通过原型对象 prototype 定义的部分）。</p> <p>所以，在 student.prototype 上定义的 height 属性，在 PrimaryStudent 中是拿不到的。</p> <ul><li>PrimaryStudent 真实的原型链</li></ul> <p><img src="https://raw.githubusercontent.com/ErrorJe/ErrorJE.github.io/images/img/20200120153923.png" alt=""></p> <ul><li>我们想要的继承关系：原型链对了，继承关系就对了</li></ul> <p><img src="https://raw.githubusercontent.com/ErrorJe/ErrorJE.github.io/images/img/20200120153941.png" alt=""></p> <h3 id="组合继承"><a href="#组合继承" class="header-anchor">#</a> 组合继承</h3> <p>组合就是一种原型链+ 构造函数的方式</p> <h4 id="实现关键-3"><a href="#实现关键-3" class="header-anchor">#</a> 实现关键</h4> <blockquote><p>这是基本可以用的方式</p></blockquote> <p>它的问题在于 Child 实例会存在 Parent 的实例属性。因为我们在 Child 构造函数中执行了 Parent 构造函数。</p> <p>同时，<code>Child.__proto__</code> 也会存在同样的 Parent 的实例属性，且所有 Child 实例的 <code>__proto__</code> 指向同一内存地址</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Child</span> <span class="token punctuation">(</span><span class="token parameter">args1<span class="token punctuation">,</span> args2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>args2 <span class="token operator">=</span> args2
  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constrcutor <span class="token operator">=</span> Child
</code></pre></div><h4 id="实现方案-2"><a href="#实现方案-2" class="header-anchor">#</a> 实现方案</h4> <p>这种静态属性继承存在一个问题：在陈旧浏览器中，属性和方法的继承我们是静态拷贝的，继承完后续父类的改动不会自动同步到子类。</p> <p>这是不同于正常面向对象思想的。但是这种组合式继承，已经相对完美、优雅</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token parameter">Child<span class="token punctuation">,</span> Parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 继承原型上的属性 </span>
  <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

  <span class="token comment">// 修复 constructor</span>
  <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child

  <span class="token comment">// 存储超类</span>
  Child<span class="token punctuation">.</span>super <span class="token operator">=</span> Parent

  <span class="token comment">// 静态属性继承</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span>setPrototypeOf<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// setPrototypeOf es6</span>
    Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> Parent<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Child<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// __proto__ es6 引入，但是部分浏览器早已支持</span>
    Child<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Parent
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 兼容 IE10 等陈旧浏览器</span>
    <span class="token comment">// 将 Parent 上的静态属性和方法拷贝一份到 Child 上，不会覆盖 Child 上的方法</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> Parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Parent<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>k <span class="token keyword">in</span> Child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Child<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> Parent<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="继承-date"><a href="#继承-date" class="header-anchor">#</a> 继承 Date</h3> <p>JS 的日期对象只能同 Date 作为构造函数来实例化得到， 所以无法用上述的方法直接实现继承</p> <h4 id="寄生组合式继承测试-date-对象"><a href="#寄生组合式继承测试-date-对象" class="header-anchor">#</a> 寄生组合式继承测试 Date 对象</h4> <p>在调用 Date 中的方法时，若浏览器发现调用该方法的对象不是 Date 构造函数构造出来的实例，则抛出错误</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 子类</span>
  <span class="token function">Date</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>arguments<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'bar'</span>
<span class="token punctuation">}</span>

<span class="token function">inherit</span><span class="token punctuation">(</span>Son<span class="token punctuation">,</span> Date<span class="token punctuation">)</span> <span class="token comment">// 实现继承</span>

<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getMyTime</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 子类静态方法</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Uncaught TypeError: this is not a Date object.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMyTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
</code></pre></div><h4 id="实现-date-对象继承"><a href="#实现-date-对象继承" class="header-anchor">#</a> 实现 Date 对象继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">DateConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回一个真正的 Date 对象</span>
  <span class="token keyword">var</span> dateObj <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">(</span>
    <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>
      Date<span class="token punctuation">,</span> <span class="token punctuation">[</span>Date<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token class-name">DateConstructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

  dateObj<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">'bar'</span>

  <span class="token keyword">return</span> dateObj <span class="token comment">// dateObj.__proto__ === DateConstructor.prototype</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实现 DateConstructor.prototype.__proto__ === Date.prototype</span>
<span class="token comment">// 最终就是 date.__proto__.__proto__ === Date.prototype</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">DateConstructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

<span class="token class-name">DateConstructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getMyTime</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMyTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="es6-继承方案"><a href="#es6-继承方案" class="header-anchor">#</a> ES6 继承方案</h3> <p>延续上面的 Date 继承，使用 ES6 的继承方式</p> <h4 id="es6-方式实现-date-继承"><a href="#es6-方式实现-date-继承" class="header-anchor">#</a> ES6 方式实现 Date 继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">DateConstructor</span> <span class="token keyword">extends</span> <span class="token class-name">Date</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span><span class="token string">'bar'</span>
  <span class="token punctuation">}</span>
  <span class="token function">getMyTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
date<span class="token punctuation">.</span><span class="token function">getMyTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 完美执行</span>
</code></pre></div><h4 id="验证继承关系"><a href="#验证继承关系" class="header-anchor">#</a> 验证继承关系</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'person'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> student1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

student1<span class="token punctuation">.</span>type <span class="token comment">// &quot;person&quot;</span>
student1 <span class="token keyword">instanceof</span> <span class="token class-name">Student</span> <span class="token comment">// true, 在其原型链上</span>
student1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token comment">// true</span>
student1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">1/20/2020, 8:34:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/whole-stack-note/p4/javascript/面向对象/05 构造函数和原型.html" class="prev">构造函数和原型对象</a></span> <span class="next"><a href="/whole-stack-note/p4/javascript/面向对象/07 对象模式.html">对象模式</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/whole-stack-note/assets/js/app.386e2e00.js" defer></script><script src="/whole-stack-note/assets/js/2.6d170185.js" defer></script><script src="/whole-stack-note/assets/js/51.15699984.js" defer></script>
  </body>
</html>
