<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM | FE 前端研究所</title>
    <meta name="description" content="ErrorJE 直辖 Blog">
    <link rel="icon" href="/whole-stack-note/logo.jpg">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/whole-stack-note/assets/css/0.styles.966634b6.css" as="style"><link rel="preload" href="/whole-stack-note/assets/js/app.386e2e00.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/2.6d170185.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/14.514ef364.js" as="script"><link rel="prefetch" href="/whole-stack-note/assets/js/10.ee1c1979.js"><link rel="prefetch" href="/whole-stack-note/assets/js/100.2427fafa.js"><link rel="prefetch" href="/whole-stack-note/assets/js/101.0030ecb0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/11.2d3a5c7c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/12.698342be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/13.bba4ce64.js"><link rel="prefetch" href="/whole-stack-note/assets/js/15.9717a3ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/16.eb42bdaa.js"><link rel="prefetch" href="/whole-stack-note/assets/js/17.dd0bd8ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/18.8ad9b54e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/19.74238fc3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/20.60f1a8a8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/21.c25bfdec.js"><link rel="prefetch" href="/whole-stack-note/assets/js/22.dbe12b43.js"><link rel="prefetch" href="/whole-stack-note/assets/js/23.a0cb54ad.js"><link rel="prefetch" href="/whole-stack-note/assets/js/24.dad8f402.js"><link rel="prefetch" href="/whole-stack-note/assets/js/25.6c58262c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/26.c9172401.js"><link rel="prefetch" href="/whole-stack-note/assets/js/27.d8463591.js"><link rel="prefetch" href="/whole-stack-note/assets/js/28.2ba1e72e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/29.705178f1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/3.e21bb9ed.js"><link rel="prefetch" href="/whole-stack-note/assets/js/30.156c6952.js"><link rel="prefetch" href="/whole-stack-note/assets/js/31.3ace218a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/32.f9ccb391.js"><link rel="prefetch" href="/whole-stack-note/assets/js/33.e4d3e853.js"><link rel="prefetch" href="/whole-stack-note/assets/js/34.c5adedab.js"><link rel="prefetch" href="/whole-stack-note/assets/js/35.43e31ae5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/36.d84a5d2e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/37.7d9a7967.js"><link rel="prefetch" href="/whole-stack-note/assets/js/38.b8b67fe7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/39.b6e131dd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/4.a23040bc.js"><link rel="prefetch" href="/whole-stack-note/assets/js/40.5278289f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/41.302b5328.js"><link rel="prefetch" href="/whole-stack-note/assets/js/42.736df250.js"><link rel="prefetch" href="/whole-stack-note/assets/js/43.dfc18400.js"><link rel="prefetch" href="/whole-stack-note/assets/js/44.bdf4cd45.js"><link rel="prefetch" href="/whole-stack-note/assets/js/45.8440854f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/46.978b71d6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/47.33aabefb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/48.6701ef33.js"><link rel="prefetch" href="/whole-stack-note/assets/js/49.6941dbdb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/5.8b0953b8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/50.b36bcf99.js"><link rel="prefetch" href="/whole-stack-note/assets/js/51.15699984.js"><link rel="prefetch" href="/whole-stack-note/assets/js/52.c7da722e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/53.db0735be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/54.6fd68dbb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/55.cee48877.js"><link rel="prefetch" href="/whole-stack-note/assets/js/56.154d093b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/57.8bd50fe4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/58.686ea3e6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/59.e170ac5f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/6.4336baf3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/60.a2ac5940.js"><link rel="prefetch" href="/whole-stack-note/assets/js/61.e2eac665.js"><link rel="prefetch" href="/whole-stack-note/assets/js/62.75c8391d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/63.43dd3a32.js"><link rel="prefetch" href="/whole-stack-note/assets/js/64.4d605da9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/65.02dde5d5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/66.58bd1260.js"><link rel="prefetch" href="/whole-stack-note/assets/js/67.51798668.js"><link rel="prefetch" href="/whole-stack-note/assets/js/68.df0ef085.js"><link rel="prefetch" href="/whole-stack-note/assets/js/69.a551a72b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/7.e465b6ba.js"><link rel="prefetch" href="/whole-stack-note/assets/js/70.d626fecf.js"><link rel="prefetch" href="/whole-stack-note/assets/js/71.a180d067.js"><link rel="prefetch" href="/whole-stack-note/assets/js/72.03ebe3f7.js"><link rel="prefetch" href="/whole-stack-note/assets/js/73.c2df73ec.js"><link rel="prefetch" href="/whole-stack-note/assets/js/74.4eb2026f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/75.fe11804c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/76.fd60ecd6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/77.ba396b06.js"><link rel="prefetch" href="/whole-stack-note/assets/js/78.6e6aefb5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/79.233a6f74.js"><link rel="prefetch" href="/whole-stack-note/assets/js/8.222b3810.js"><link rel="prefetch" href="/whole-stack-note/assets/js/80.d41d146c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/81.887086f4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/82.be84b238.js"><link rel="prefetch" href="/whole-stack-note/assets/js/83.df6fa9f1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/84.b551aea8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/85.f42f4924.js"><link rel="prefetch" href="/whole-stack-note/assets/js/86.d3039e9a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/87.dd22dc96.js"><link rel="prefetch" href="/whole-stack-note/assets/js/88.1b09c783.js"><link rel="prefetch" href="/whole-stack-note/assets/js/89.f85a6ad9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/9.7a222e22.js"><link rel="prefetch" href="/whole-stack-note/assets/js/90.23b01315.js"><link rel="prefetch" href="/whole-stack-note/assets/js/91.c9056ffe.js"><link rel="prefetch" href="/whole-stack-note/assets/js/92.be511897.js"><link rel="prefetch" href="/whole-stack-note/assets/js/93.dd239170.js"><link rel="prefetch" href="/whole-stack-note/assets/js/94.ef196c74.js"><link rel="prefetch" href="/whole-stack-note/assets/js/95.b93789a9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/96.3af32f62.js"><link rel="prefetch" href="/whole-stack-note/assets/js/97.be8eca0c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/98.4d18836d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/99.c9472643.js">
    <link rel="stylesheet" href="/whole-stack-note/assets/css/0.styles.966634b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/whole-stack-note/" class="home-link router-link-active"><!----> <span class="site-name">FE 前端研究所</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link router-link-exact-active router-link-active">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link router-link-exact-active router-link-active">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/whole-stack-note/p4/browser/DOM.html" class="active sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#dom-基础知识" class="sidebar-link">DOM 基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#发展历史" class="sidebar-link">发展历史</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#dom-api-的组成" class="sidebar-link">DOM API 的组成</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#node-节点" class="sidebar-link">Node 节点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#节点类型分类" class="sidebar-link">节点类型分类</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#节点属性" class="sidebar-link">节点属性</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#节点-api" class="sidebar-link">节点 API</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#节点封装——遍历方法" class="sidebar-link">节点封装——遍历方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#element-元素" class="sidebar-link">Element 元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#attribute-元素属性" class="sidebar-link">Attribute 元素属性</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#元素操作-api" class="sidebar-link">元素操作 API</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#元素兼容操作封装" class="sidebar-link">元素兼容操作封装</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#应用案例" class="sidebar-link">应用案例</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#nodeiterator-和-treewalker-遍历" class="sidebar-link">NodeIterator 和 TreeWalker 遍历</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#nodeiterator的用法" class="sidebar-link">NodeIterator的用法</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#treewalker的用法" class="sidebar-link">TreeWalker的用法</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#range-api" class="sidebar-link">Range API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#创建-range-对象" class="sidebar-link">创建 Range 对象</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#从用户选中区创建" class="sidebar-link">从用户选中区创建</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#更改区域内容" class="sidebar-link">更改区域内容</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#完整例子" class="sidebar-link">完整例子</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#dom-编程最佳实践" class="sidebar-link">DOM 编程最佳实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#平稳退化：无-js-也正常加载页面" class="sidebar-link">平稳退化：无 JS 也正常加载页面</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#页面结构与行文分离：引用外部文件" class="sidebar-link">页面结构与行文分离：引用外部文件</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#向后兼容：渐进增强" class="sidebar-link">向后兼容：渐进增强</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#性能考虑" class="sidebar-link">性能考虑</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p4/browser/DOM.html#结构化程序设计" class="sidebar-link">结构化程序设计</a></li></ul></li></ul></li><li><a href="/whole-stack-note/p4/browser/BOM.html" class="sidebar-link">BOM</a></li><li><a href="/whole-stack-note/p4/browser/CSSOM.html" class="sidebar-link">CSSOM</a></li><li><a href="/whole-stack-note/p4/browser/前端本地存储.html" class="sidebar-link">前端本地存储</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h1> <h2 id="dom-基础知识"><a href="#dom-基础知识" class="header-anchor">#</a> DOM 基础知识</h2> <h3 id="发展历史"><a href="#发展历史" class="header-anchor">#</a> 发展历史</h3> <p><code>DOM api</code> 是最早出来的一批API。所以早期DOM泛指浏览器中所有的API，现在是狭义的意义，即 <code>文档对象模型</code>。</p> <ul><li><p>1 文档：D，document，加载后，网页文档会变成文档对象。</p></li> <li><p>2 对象：O，object，window对象，是浏览器窗口本身。即BOM，含油window.open和window.blur等方法</p></li> <li><p>3 模型：M，model，整个页面文档对象相当于一棵树，元素之间互为层次关系。如html是body和head的父元素</p></li> <li><p>4 节点，DOM树上的单位</p></li></ul> <h3 id="dom-api-的组成"><a href="#dom-api-的组成" class="header-anchor">#</a> DOM API 的组成</h3> <p><code>DOM API</code> 大致包含4个部分</p> <ul><li>节点：DOM树形结构中的节点相关API</li> <li>事件：触发和监听事件相关API</li> <li>Range：操作文字范围相关API</li> <li>遍历：遍历DOM需要的API</li></ul> <h2 id="node-节点"><a href="#node-节点" class="header-anchor">#</a> Node 节点</h2> <h3 id="节点类型分类"><a href="#节点类型分类" class="header-anchor">#</a> 节点类型分类</h3> <p>作为 <code>DOM</code> 树，所有的节点有统一的接口 <code>Node</code>。他们之间有类别和继承的的关系。</p> <p><img src="https://raw.githubusercontent.com/ErrorJe/ErrorJE.github.io/images/img/20200120170208.png" alt=""></p> <p>除了 Document 和 DocumentFrangment，都有与之对应的 HTML 写法。</p> <div class="language-js extra-class"><pre class="language-js"><code>Element<span class="token operator">:</span> <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>tagname<span class="token operator">&gt;</span> —— 元素型节点
Text<span class="token operator">:</span> text ——  字符数据，文本节点
Comment<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> comments <span class="token operator">--</span><span class="token operator">&gt;</span> —— 字符数据，注释节点
DocumentType<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">!</span>Doctype html<span class="token operator">&gt;</span> —— 文档类型
ProcessingInstruction<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">?</span>a <span class="token number">1</span><span class="token operator">?</span><span class="token operator">&gt;</span> —— 处理信息
</code></pre></div><h3 id="节点属性"><a href="#节点属性" class="header-anchor">#</a> 节点属性</h3> <p>节点有三个主要属性分类</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">DOM</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>nodeType <span class="token comment">// 类型</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>nodeName <span class="token comment">// 名字</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>nodeValue <span class="token comment">// 值</span>
</code></pre></div><h4 id="nodetype-节点类型"><a href="#nodetype-节点类型" class="header-anchor">#</a> nodeType 节点类型</h4> <div class="language- extra-class"><pre class="language-text"><code>标签 1
属性 2
文本 3
</code></pre></div><h4 id="nodename-节点名"><a href="#nodename-节点名" class="header-anchor">#</a> nodeName 节点名</h4> <div class="language- extra-class"><pre class="language-text"><code>标签：大写的标签名
属性：小写的属性名
文本：#text
</code></pre></div><h4 id="nodevalue-节点值"><a href="#nodevalue-节点值" class="header-anchor">#</a> nodeValue 节点值</h4> <div class="language- extra-class"><pre class="language-text"><code>标签： Null
属性： 属性值
文本： 文本内容
</code></pre></div><h3 id="节点-api"><a href="#节点-api" class="header-anchor">#</a> 节点 API</h3> <p>作为DOM树继承关系的根节点，定义了DOM节点在DOM树上的操作。</p> <h4 id="节点关系-——-位置关系"><a href="#节点关系-——-位置关系" class="header-anchor">#</a> 节点关系 —— 位置关系</h4> <blockquote><p>Node提供了一组属性，来表示它在DOM树中的关系</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1 父节点</span>
parentNode <span class="token operator">/</span> parentElement 父节点 <span class="token operator">/</span> 父元素

<span class="token comment">// 2 子节点</span>
node<span class="token punctuation">.</span>childNodes <span class="token comment">// 子节点集合（包括元素，文本，注释）</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>firstChild <span class="token comment">// 第一个子节点</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>lastChild <span class="token comment">// 最后一个子节点</span>

<span class="token comment">// 3 兄弟节点</span>
nextSibling <span class="token comment">// 跟在后面的兄弟节点</span>
previousSibling <span class="token comment">// 前一个兄弟节点， 没有则 null</span>

<span class="token comment">// 4 位置节点</span>
firstNode 第一个节点
lastNode 最后一个节点
</code></pre></div><h4 id="节点操作"><a href="#节点操作" class="header-anchor">#</a> 节点操作</h4> <p>还提供了操作DOM树的API</p> <p>节点的操作（元素通用），一般都是通过 <code>父节点</code> 上去下手</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父节点末尾增加子节点。child 是要增加的节点，也是返回值</span>
parentNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span> 

<span class="token comment">// 在指定父节点下，在节点 referenceNode 前插入新节点。</span>
<span class="token comment">// 若没有指定该节点，则插入到子节点的末尾</span>
parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> referenceNode<span class="token punctuation">)</span>
 
<span class="token comment">// 删除子节点</span>
parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span> 

<span class="token comment">// 节点替换</span>
parentNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newChild<span class="token punctuation">,</span> oldChild<span class="token punctuation">)</span> 
</code></pre></div><p>我们可以发现，虽然上面四个API没有对称实现 <code>after/before</code> 的配套功能（最小设计原则）。但是可以通过这些原子操作来扩充如 <code>insertAfter</code> 这样的API。——所以 <code>JQ</code> 对其做了补充。</p> <h4 id="节点高级-api"><a href="#节点高级-api" class="header-anchor">#</a> 节点高级 API</h4> <div class="language-js extra-class"><pre class="language-js"><code>node<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>otherNode<span class="token punctuation">)</span> 用于比较两个节点中关系的函数
node<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>otherNode<span class="token punctuation">)</span> 检查 otherNode 是否是 node 的后代
node<span class="token punctuation">.</span><span class="token function">isEqualNode</span><span class="token punctuation">(</span>otherNode<span class="token punctuation">)</span>  检查两个节点是否完全相同。
node<span class="token punctuation">.</span>isSameNode 检查两个节点是否是同一个节点，实际上在 js 中可以用 <span class="token operator">===</span>
node<span class="token punctuation">.</span>cloneNode 复制一个节点，若传入参数<span class="token boolean">true</span>，则会连同子元素做深拷贝
node<span class="token punctuation">.</span>style 节点上的样式
</code></pre></div><h4 id="document-对象创建"><a href="#document-对象创建" class="header-anchor">#</a> document 对象创建</h4> <p>DOM标准规定节点必须从文档的 <code>create</code> 方法创建出来，而不能使用 JS 的new 运算。所以 document对象 有很多方法来创建对应的节点类型</p> <div class="language-js extra-class"><pre class="language-js"><code>createElement 创建一个元素
createTextNode 创建文本元素
createCDATASection 
<span class="token function">createComment</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> 创建注释节点， data 是字符串注释内容
createProcessingInstruction
createDocumentFragment 创建 iframe
createDocumentType
</code></pre></div><h3 id="节点封装——遍历方法"><a href="#节点封装——遍历方法" class="header-anchor">#</a> 节点封装——遍历方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 常会用到遍历， Nodes.length , 但是这个长度是节点的长度，而不是元素的长度。</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 首先定义变量，来记录指定元素的数量，而不是依靠 i (节点数量)</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token comment">// 需要先判断一下，你需要什么样的结点</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;</span> nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName <span class="token operator">==</span> <span class="token string">'LI'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只要遍历到这个指定元素了，就记录一下</span>
    count<span class="token operator">++</span>
    <span class="token comment">// ....假设这里做一个表格斑马纹效果...</span>
    nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> count<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">?</span><span class="token string">'red'</span><span class="token operator">:</span><span class="token string">'yellow'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="element-元素"><a href="#element-元素" class="header-anchor">#</a> Element 元素</h2> <p>虽然Node接口提供了大量操作节点的API，但是大多数时候，我们开发者关注的是元素。Element 元素是Node 的子类。</p> <p>元素：对应的是HTML中的标签，有子节点，也有属性。</p> <h3 id="attribute-元素属性"><a href="#attribute-元素属性" class="header-anchor">#</a> Attribute 元素属性</h3> <p>在元素中，有一系列操作属性的方法。实际上就是元素标签中的属性。</p> <blockquote><p>元素的 Attribute 和 Property 是不一样的东西</p></blockquote> <h4 id="将元素属性当字符串"><a href="#将元素属性当字符串" class="header-anchor">#</a> 将元素属性当字符串</h4> <div class="language-js extra-class"><pre class="language-js"><code>el<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> 获取某个属性值
el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> 给元素设置属性
el<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'xx'</span><span class="token punctuation">)</span> 删除某个属性
el<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span> 是否存在某属性
el<span class="token punctuation">.</span><span class="token function">hasAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 是否有属性存在
el<span class="token punctuation">.</span>getComputedStyle 元素的样式属性集合
</code></pre></div><h4 id="将元素属性当节点——性能极致"><a href="#将元素属性当节点——性能极致" class="header-anchor">#</a> 将元素属性当节点——性能极致</h4> <div class="language-js extra-class"><pre class="language-js"><code>getAttributeNode
setAttributeNode
</code></pre></div><h4 id="将元素属性当对象"><a href="#将元素属性当对象" class="header-anchor">#</a> 将元素属性当对象</h4> <p>可以像访问 <code>property</code> 一样，使用 <code>attribute</code> 对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// el.attributes 元素的所有属性</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>class <span class="token operator">=</span> <span class="token string">'a'</span>
<span class="token comment">// 等效于</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="元素操作-api"><a href="#元素操作-api" class="header-anchor">#</a> 元素操作 API</h3> <h4 id="元素关系"><a href="#元素关系" class="header-anchor">#</a> 元素关系</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">DOM</span><span class="token punctuation">.</span>children <span class="token comment">// 子元素集合</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>childElementCount  <span class="token comment">// 子元素个数</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>firstElementChild  <span class="token comment">// 第一个子元素</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>lastElementChild  <span class="token comment">// 最后一个子元素</span>

<span class="token constant">DOM</span><span class="token punctuation">.</span>previousSibling <span class="token comment">// 某个元素的前一个兄弟节点</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>previousElementSibling <span class="token comment">// 某个元素的前一个兄弟元素</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>nextSibling <span class="token comment">// 某一个元素的后一个兄弟节点</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>nextElementSibling <span class="token comment">// 某个元素的后一个兄弟元素</span>
</code></pre></div><h4 id="查找元素"><a href="#查找元素" class="header-anchor">#</a> 查找元素</h4> <p>document 节点也提供了一些API来锁定元素，就像CSS选择器一样。</p> <blockquote><p>前两种API的性能低于后面的几种</p> <p>后三种，获取的是元素集合。所以都有一个 s</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>querySelector
querySelectorAll
getElementById
getElementsByName
getElementsByTagName
getElementsByClassName
</code></pre></div><h4 id="操作元素"><a href="#操作元素" class="header-anchor">#</a> 操作元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 删除DOM</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span>innerHTML <span class="token comment">// 设置属性</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newChild<span class="token punctuation">)</span> <span class="token comment">// 追加子元素</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newChild<span class="token punctuation">,</span> refChild<span class="token punctuation">)</span> <span class="token comment">// 把新的子元素插入到某元素前面</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newChild<span class="token punctuation">,</span> refChild<span class="token punctuation">)</span> <span class="token comment">// 参照元素替换成新元素</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span> <span class="token comment">// 删除父级元素中的第一个子元素</span>

<span class="token comment">// 删除所有子元素</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token constant">DOM</span><span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 解析成Html插入到相对于自己的位置</span>
<span class="token comment">// 这个方法在JQ中也有的：$().append()内部尾部， prepend()内部首部， after()后面， before()前面 </span>
<span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">'afterend自己后面/beforebegin自己前面/beforeend内部后面/afterbegin内部前面'</span><span class="token punctuation">,</span> <span class="token constant">HTML</span><span class="token punctuation">)</span>
</code></pre></div><p>新的标准中可以这样去获取 DOM 的样式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 元素标签只要定义 id=&quot;dom&quot; 就可以不用 API 去获取 DOM，可以直接写</span>
dom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>attr <span class="token operator">=</span> <span class="token string">'value'</span>
</code></pre></div><h4 id=""><a href="#" class="header-anchor">#</a></h4> <h4 id="元素创建"><a href="#元素创建" class="header-anchor">#</a> 元素创建</h4> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'标签代码和内容'</span><span class="token punctuation">)</span>
<span class="token comment">// 缺陷： 页面加载完毕后， 若是通过这种方式创建元素，则页面上存在的所有内容都会消失</span>
<span class="token comment">// 页面加载时创建，是正常的</span>
<span class="token comment">// 还可以嵌入外部广告：比如搜百度新闻代码，就可以得到一个script的src</span>
<span class="token comment">// 然后实际上是代码块</span>

<span class="token constant">DOM</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'标签和代码'</span> <span class="token comment">// 每次都是重新赋值</span>

document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'标签名字'</span><span class="token punctuation">)</span>
  <span class="token comment">// 第一步， 这种方式创建元素</span>
  <span class="token keyword">var</span> sDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
  <span class="token comment">// 第二步， 给标签写入内容</span>
  sDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'这是一个P'</span>
  <span class="token comment">// 第三步， 在创建之后，还要追加（内部尾部）到父级元素中</span>
  fDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>sDom<span class="token punctuation">)</span>
</code></pre></div><h3 id="元素兼容操作封装"><a href="#元素兼容操作封装" class="header-anchor">#</a> 元素兼容操作封装</h3> <h4 id="获取父级元素的第一个自己元素"><a href="#获取父级元素的第一个自己元素" class="header-anchor">#</a> 获取父级元素的第一个自己元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取父级元素的第一个子级元素</span>
<span class="token keyword">function</span> <span class="token function">getFirstElementChild</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>getFirstElementChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> element<span class="token punctuation">.</span>firstElementChild
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> element<span class="token punctuation">.</span>firstChild <span class="token comment">//第一个节点</span>
    <span class="token comment">// 找标签节点: node 有意义, 并且他的类型是标签</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      node <span class="token operator">=</span> node<span class="token punctuation">.</span>nextSibling
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="获取父级元素中的最后一个子元素"><a href="#获取父级元素中的最后一个子元素" class="header-anchor">#</a> 获取父级元素中的最后一个子元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取父级元素中的最后一个子元素
 * @param element 父级元素
 * @returns {*} 最后一个子元素
 */</span>
<span class="token keyword">function</span> <span class="token function">getLastElement</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>lastElementChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> element<span class="token punctuation">.</span>lastElementChild<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> element<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node <span class="token operator">=</span> node<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="获取某元素前一个兄弟元素"><a href="#获取某元素前一个兄弟元素" class="header-anchor">#</a> 获取某元素前一个兄弟元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取某个元素的前一个兄弟元素
 * @param element 某个元素
 * @returns {*} 前一个兄弟元素
 */</span>
<span class="token keyword">function</span> <span class="token function">getPreviousElement</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>previousElementSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> element<span class="token punctuation">.</span>previousElementSibling
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> element<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node <span class="token operator">=</span> node<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="获取某元素后一个兄弟元素"><a href="#获取某元素后一个兄弟元素" class="header-anchor">#</a> 获取某元素后一个兄弟元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取某个元素的后一个兄弟元素
 * @param element 某个元素
 * @returns {*} 后一个兄弟元素
 */</span>
<span class="token keyword">function</span> <span class="token function">getNextElement</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> element<span class="token punctuation">.</span>nextElementSibling
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> element<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node <span class="token operator">=</span> node<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> node<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="获取某元素所有兄弟元素"><a href="#获取某元素所有兄弟元素" class="header-anchor">#</a> 获取某元素所有兄弟元素</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 获取某个元素的所有兄弟元素
 * @param element 某个元素
 * @returns {Array} 兄弟元素
 */</span>
<span class="token keyword">function</span> <span class="token function">getSiblings</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>element<span class="token punctuation">)</span><span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ele <span class="token operator">=</span> element<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>ele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ele<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ele <span class="token operator">=</span> ele<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  ele <span class="token operator">=</span> element<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>ele<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ele<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    ele <span class="token operator">=</span> ele<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> elements<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="应用案例"><a href="#应用案例" class="header-anchor">#</a> 应用案例</h3> <h4 id="单选、全选与去选"><a href="#单选、全选与去选" class="header-anchor">#</a> 单选、全选与去选</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取全选的复选框 fDom</span>
<span class="token comment">// 获取子级复选框 sDom</span>
<span class="token comment">// 点击全选的复选框，获取当前状态，且改变子级选框的状态</span>
fDom<span class="token punctuation">.</span><span class="token function">onclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sDom<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 子级选框跟随父级选框状态</span>
    sDom<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checked
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 获取子级选框</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sDom<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 分别注册点击事件</span>
  sDom<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 默认都被选中</span>
    <span class="token comment">// 每次点击都要循环判断是否所有选框都被选中</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> sDom<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 没选中的改变状态</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sDom<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>checked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 改变父级全选状态</span>
    fDom<span class="token punctuation">.</span>checked <span class="token operator">=</span> flag
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="模拟百度搜索框"><a href="#模拟百度搜索框" class="header-anchor">#</a> 模拟百度搜索框</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> keywords <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'xx'</span><span class="token punctuation">,</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span> <span class="token string">'xxxx'</span><span class="token punctuation">,</span> <span class="token string">'eeee'</span><span class="token punctuation">,</span> <span class="token string">'xxxe'</span><span class="token punctuation">]</span>
<span class="token comment">// 获取文本框注册键盘抬起事件</span>
<span class="token constant">DOM</span><span class="token punctuation">.</span><span class="token function-variable function">onkeyup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 每一次键盘弹起，都判断页面中有没有这个div</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 删除一次</span>
    idDOM<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 获取文本框的内容</span>
  <span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
  <span class="token keyword">var</span> tempArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment">// 临时空数组， 存放对应上的数据</span>
  <span class="token comment">// 将文本框内容和数组中的每个数据对比</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>keywords<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 字符是否是最开始出现的</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keywords<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      tempArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>keywords<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 追加</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 若文本框是空的，临时数组中没内容，则不创建div</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> tempArr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 若页面中有这个div, 删除这个div</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      idDOM<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 后面代码不执行</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 遍历临时数组， 创建DIV.把div放到对应id 的div中</span>
  <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
  <span class="token comment">// 容器DOM</span>
  idDOM<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span>
  div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'idx'</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'350px'</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'1px solid lightblue'</span>

  <span class="token comment">// 循环遍历临时数组， 创建对应的p标签</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tempArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建 p 标签</span>
    <span class="token keyword">var</span> pDOM <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>
    <span class="token comment">// 将 p 加到 div 中</span>
    div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>pDOM<span class="token punctuation">)</span>
    <span class="token comment">// 调用方法，改写文本</span>
    <span class="token function">setInnerText</span><span class="token punctuation">(</span>pDOM<span class="token punctuation">,</span> tempArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置搜索结果的样式</span>
    pDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> <span class="token number">0</span>
    pDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>padding <span class="token operator">=</span> <span class="token number">0</span>
    pDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">'pointer'</span>
    pDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginTop <span class="token operator">=</span> <span class="token string">'5px'</span>
    pDOM<span class="token punctuation">.</span>style<span class="token punctuation">.</span>marginLeft <span class="token operator">=</span> <span class="token string">'5px'</span>
    <span class="token comment">// 鼠标进入高亮</span>
    pDOM<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'yellow'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//  鼠标离开，取消着色</span>
    pDOM<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// 设置任意的标签中间的任意文本内容</span>
  <span class="token keyword">function</span> <span class="token function">setInnerText</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span>text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判断浏览器是否支持这个属性</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> element<span class="token punctuation">.</span>textContent <span class="token operator">==</span><span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//不支持</span>
      element<span class="token punctuation">.</span>innerText<span class="token operator">=</span>text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">//支持这个属性</span>
      element<span class="token punctuation">.</span>textContent<span class="token operator">=</span>text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="nodeiterator-和-treewalker-遍历"><a href="#nodeiterator-和-treewalker-遍历" class="header-anchor">#</a> NodeIterator 和 TreeWalker 遍历</h2> <p>通过Node的属性，可以用JS遍历整个树。实际上DOM API中还提供了 NodeIterator 和 TreeWalker 来遍历树。</p> <p>他们2个还提供了过滤功能，可以把属性节点也包含在遍历之内。</p> <h3 id="nodeiterator的用法"><a href="#nodeiterator的用法" class="header-anchor">#</a> NodeIterator的用法</h3> <p>就是一个迭代器</p> <p>终止条件是比较老式的，即 <code>nextNode</code> 返回 <code>null</code></p> <p>第二个参数用了位运算的掩码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> iterator <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createNodeIterator</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> NodeFilter<span class="token punctuation">.</span><span class="token constant">SHOW_TEXT</span> 
    <span class="token operator">|</span> NodeFilter<span class="token punctuation">.</span><span class="token constant">SHOW_COMMENT</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> node<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>node <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">nextNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="treewalker的用法"><a href="#treewalker的用法" class="header-anchor">#</a> TreeWalker的用法</h3> <p>比起上面那种，这多了在DOM树上自动移动当前节点的能力。一般用于跳过某些节点，或者重复遍历某些节点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> walker <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTreeWalker</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> NodeFilter<span class="token punctuation">.</span><span class="token constant">SHOW_ELEMENT</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> node<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>node <span class="token operator">=</span> walker<span class="token punctuation">.</span><span class="token function">nextNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
    node<span class="token punctuation">.</span><span class="token function">nextSibling</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="range-api"><a href="#range-api" class="header-anchor">#</a> Range API</h2> <blockquote><p>若不是与富文本编辑类业务相关，只需要了解。这个是比较专业的领域。</p></blockquote> <p><code>range API</code> 表示HTML上的一个范围，以文字为最小单位，所以不一定是完整的节点，也可能是text节点中的一段，也可以是头尾两个Text的一部分加上中间的元素。</p> <p>这个API可以比节点API更加精准地操作DOM树。凡是节点API能做到的，这个都能做到，而且性能更高。就是使用起来比较麻烦。</p> <p>所以只又做底层框架或者富文本编辑对它有强需求</p> <h3 id="创建-range-对象"><a href="#创建-range-对象" class="header-anchor">#</a> 创建 Range 对象</h3> <p>一般通过设置它的范围实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    firstText <span class="token operator">=</span> p<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    secondText <span class="token operator">=</span> em<span class="token punctuation">.</span>firstChild
range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>firstText<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment">// do not forget the leading space</span>
range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>secondText<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="从用户选中区创建"><a href="#从用户选中区创建" class="header-anchor">#</a> 从用户选中区创建</h3> <p>处理用户选中区域</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="更改区域内容"><a href="#更改区域内容" class="header-anchor">#</a> 更改区域内容</h3> <p>方式是取出和插入，分别是 <code>extractContents</code> 和 <code>insertNode</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fragment <span class="token operator">=</span> range<span class="token punctuation">.</span><span class="token function">extractContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
range<span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="完整例子"><a href="#完整例子" class="header-anchor">#</a> 完整例子</h3> <blockquote><p>考虑命名空间的场景不多，主要是SVG。元素和属性相关API都有带命名空间的版本。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    firstText <span class="token operator">=</span> p<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    secondText <span class="token operator">=</span> em<span class="token punctuation">.</span>firstChild
range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>firstText<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment">// do not forget the leading space</span>
range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>secondText<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> fragment <span class="token operator">=</span> range<span class="token punctuation">.</span><span class="token function">extractContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
range<span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="dom-编程最佳实践"><a href="#dom-编程最佳实践" class="header-anchor">#</a> DOM 编程最佳实践</h2> <h3 id="平稳退化：无-js-也正常加载页面"><a href="#平稳退化：无-js-也正常加载页面" class="header-anchor">#</a> 平稳退化：无 JS 也正常加载页面</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--href设置为真实存在的--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.example.com<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>popUp('http://www.example.com'; return false;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Example3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
  弹出新窗口
*/</span>
<span class="token keyword">function</span> <span class="token function">popUp</span><span class="token punctuation">(</span><span class="token parameter">winURL</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">/*
    open()有三个参数
    第一个参数：想在新窗口打开的网页的URL地址
    第二个参数：新窗口的名字
    第三个参数：以逗号分隔的字符，新窗口的各种属性。包括尺寸，工具条，菜单条，初始位置等
  */</span>
  window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>winURL<span class="token punctuation">,</span><span class="token string">&quot;popup&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;witdh=320,height=480&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="页面结构与行文分离：引用外部文件"><a href="#页面结构与行文分离：引用外部文件" class="header-anchor">#</a> 页面结构与行文分离：引用外部文件</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--结构与行为分离--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.example.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>popup<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Example4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>000_JS_prac2.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="向后兼容：渐进增强"><a href="#向后兼容：渐进增强" class="header-anchor">#</a> 向后兼容：渐进增强</h3> <blockquote><p>排除一些老旧浏览器执行 JS 不兼容的问题</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>onload <span class="token operator">=</span> prepareLinks<span class="token punctuation">;</span> <span class="token comment">//加载完dom就执行</span>
<span class="token keyword">function</span> <span class="token function">prepareLinks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//封装成一个函数来执行</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>docunment<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//对象检查，浏览器是否认识这个用法.渐进增强原则，排除那些老的浏览器</span>
  <span class="token keyword">var</span> links <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将所有连接放入一个数组</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> links<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//遍历元素</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>links<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;popup&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//判断class为popup的元素</span>
      links<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//绑定事件</span>
        <span class="token function">popUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;href&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调用popUp函数</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//取消链接默认行为</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="性能考虑"><a href="#性能考虑" class="header-anchor">#</a> 性能考虑</h3> <p>少访问DOM：试试能否用变量保存第一次访问DOM的结果，之后用变量来处理</p> <p>减少标记：标记的增加必然增加BOM树的规模</p> <p>合并脚本：多个脚本文件，最好组合在一起</p> <p>脚本放置：放在之前</p> <p>压缩脚本文件：把脚本中不必要的字节，如空格、注释都删除。所以会有工作副本和精简副本两个版本文件。精简副本放在站点上,且在文件名上加上min</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">XXXXX</span><span class="token punctuation">.</span>min<span class="token punctuation">.</span>js
</code></pre></div><h3 id="结构化程序设计"><a href="#结构化程序设计" class="header-anchor">#</a> 结构化程序设计</h3> <p>理论上函数只有一个入口和出口，但是实际开发中，把多个出口（return）放在函数的开头部分，是可以接受的</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">1/20/2020, 9:05:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/whole-stack-note/p4/browser/BOM.html">BOM</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/whole-stack-note/assets/js/app.386e2e00.js" defer></script><script src="/whole-stack-note/assets/js/2.6d170185.js" defer></script><script src="/whole-stack-note/assets/js/14.514ef364.js" defer></script>
  </body>
</html>
