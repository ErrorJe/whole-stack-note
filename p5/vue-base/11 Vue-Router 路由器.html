<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue-Router 路由器 | FE 前端研究所</title>
    <meta name="description" content="ErrorJE 直辖 Blog">
    <link rel="icon" href="/whole-stack-note/logo.jpg">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/whole-stack-note/assets/css/0.styles.966634b6.css" as="style"><link rel="preload" href="/whole-stack-note/assets/js/app.6bc873a4.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/2.6d170185.js" as="script"><link rel="preload" href="/whole-stack-note/assets/js/78.c3504544.js" as="script"><link rel="prefetch" href="/whole-stack-note/assets/js/10.859902c2.js"><link rel="prefetch" href="/whole-stack-note/assets/js/100.bf5ad57d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/11.2d3a5c7c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/12.698342be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/13.bba4ce64.js"><link rel="prefetch" href="/whole-stack-note/assets/js/14.514ef364.js"><link rel="prefetch" href="/whole-stack-note/assets/js/15.9717a3ce.js"><link rel="prefetch" href="/whole-stack-note/assets/js/16.2fbf7d56.js"><link rel="prefetch" href="/whole-stack-note/assets/js/17.e0be6e33.js"><link rel="prefetch" href="/whole-stack-note/assets/js/18.ad531cdc.js"><link rel="prefetch" href="/whole-stack-note/assets/js/19.95fa4b0b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/20.77206337.js"><link rel="prefetch" href="/whole-stack-note/assets/js/21.f65eeaeb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/22.6d194f6c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/23.d99a37eb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/24.796cbc68.js"><link rel="prefetch" href="/whole-stack-note/assets/js/25.678932fa.js"><link rel="prefetch" href="/whole-stack-note/assets/js/26.7de1d270.js"><link rel="prefetch" href="/whole-stack-note/assets/js/27.5655e4df.js"><link rel="prefetch" href="/whole-stack-note/assets/js/28.2638e749.js"><link rel="prefetch" href="/whole-stack-note/assets/js/29.3727f5a2.js"><link rel="prefetch" href="/whole-stack-note/assets/js/3.e21bb9ed.js"><link rel="prefetch" href="/whole-stack-note/assets/js/30.e172d541.js"><link rel="prefetch" href="/whole-stack-note/assets/js/31.4743afe2.js"><link rel="prefetch" href="/whole-stack-note/assets/js/32.e43dfe09.js"><link rel="prefetch" href="/whole-stack-note/assets/js/33.702e33d9.js"><link rel="prefetch" href="/whole-stack-note/assets/js/34.c882e333.js"><link rel="prefetch" href="/whole-stack-note/assets/js/35.46c1d162.js"><link rel="prefetch" href="/whole-stack-note/assets/js/36.5360f9a1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/37.3202f21f.js"><link rel="prefetch" href="/whole-stack-note/assets/js/38.2da5a094.js"><link rel="prefetch" href="/whole-stack-note/assets/js/39.90ca2ef5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/4.40344acd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/40.59c42333.js"><link rel="prefetch" href="/whole-stack-note/assets/js/41.a54473c6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/42.fc4f53b4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/43.850f9f12.js"><link rel="prefetch" href="/whole-stack-note/assets/js/44.c7204026.js"><link rel="prefetch" href="/whole-stack-note/assets/js/45.b3a7a2e3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/46.dd4d8f2c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/47.bd5b6097.js"><link rel="prefetch" href="/whole-stack-note/assets/js/48.48d2c838.js"><link rel="prefetch" href="/whole-stack-note/assets/js/49.172dda36.js"><link rel="prefetch" href="/whole-stack-note/assets/js/5.8b0953b8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/50.1725564c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/51.196e4b02.js"><link rel="prefetch" href="/whole-stack-note/assets/js/52.ae8fac40.js"><link rel="prefetch" href="/whole-stack-note/assets/js/53.31d25e2a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/54.de406b35.js"><link rel="prefetch" href="/whole-stack-note/assets/js/55.11910563.js"><link rel="prefetch" href="/whole-stack-note/assets/js/56.a4908575.js"><link rel="prefetch" href="/whole-stack-note/assets/js/57.4bf34335.js"><link rel="prefetch" href="/whole-stack-note/assets/js/58.a5af0f91.js"><link rel="prefetch" href="/whole-stack-note/assets/js/59.262ef77e.js"><link rel="prefetch" href="/whole-stack-note/assets/js/6.4336baf3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/60.cf84b989.js"><link rel="prefetch" href="/whole-stack-note/assets/js/61.4293f9d8.js"><link rel="prefetch" href="/whole-stack-note/assets/js/62.1b732026.js"><link rel="prefetch" href="/whole-stack-note/assets/js/63.d2444983.js"><link rel="prefetch" href="/whole-stack-note/assets/js/64.7b3869bd.js"><link rel="prefetch" href="/whole-stack-note/assets/js/65.f2321db1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/66.015b0460.js"><link rel="prefetch" href="/whole-stack-note/assets/js/67.79ca4b49.js"><link rel="prefetch" href="/whole-stack-note/assets/js/68.625a66b6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/69.ba8b58ea.js"><link rel="prefetch" href="/whole-stack-note/assets/js/7.da34982c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/70.a8025bc6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/71.f3854a51.js"><link rel="prefetch" href="/whole-stack-note/assets/js/72.dd8a29bc.js"><link rel="prefetch" href="/whole-stack-note/assets/js/73.c77a2af4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/74.347286ff.js"><link rel="prefetch" href="/whole-stack-note/assets/js/75.82de3672.js"><link rel="prefetch" href="/whole-stack-note/assets/js/76.3267dbb3.js"><link rel="prefetch" href="/whole-stack-note/assets/js/77.6d9e1685.js"><link rel="prefetch" href="/whole-stack-note/assets/js/79.607340ee.js"><link rel="prefetch" href="/whole-stack-note/assets/js/8.5f8f0f1a.js"><link rel="prefetch" href="/whole-stack-note/assets/js/80.69ddaba5.js"><link rel="prefetch" href="/whole-stack-note/assets/js/81.e7caa3d6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/82.efa567be.js"><link rel="prefetch" href="/whole-stack-note/assets/js/83.f7cb13c6.js"><link rel="prefetch" href="/whole-stack-note/assets/js/84.e63447e1.js"><link rel="prefetch" href="/whole-stack-note/assets/js/85.e6a94fd4.js"><link rel="prefetch" href="/whole-stack-note/assets/js/86.308384da.js"><link rel="prefetch" href="/whole-stack-note/assets/js/87.2ce8d320.js"><link rel="prefetch" href="/whole-stack-note/assets/js/88.69135882.js"><link rel="prefetch" href="/whole-stack-note/assets/js/89.b8f0c03d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/9.1e9521ac.js"><link rel="prefetch" href="/whole-stack-note/assets/js/90.33865b48.js"><link rel="prefetch" href="/whole-stack-note/assets/js/91.65044a70.js"><link rel="prefetch" href="/whole-stack-note/assets/js/92.b3b4f194.js"><link rel="prefetch" href="/whole-stack-note/assets/js/93.4010fb6d.js"><link rel="prefetch" href="/whole-stack-note/assets/js/94.cb22e14c.js"><link rel="prefetch" href="/whole-stack-note/assets/js/95.914024d0.js"><link rel="prefetch" href="/whole-stack-note/assets/js/96.eb2945fb.js"><link rel="prefetch" href="/whole-stack-note/assets/js/97.cd31b69b.js"><link rel="prefetch" href="/whole-stack-note/assets/js/98.197c29af.js"><link rel="prefetch" href="/whole-stack-note/assets/js/99.b26c857a.js">
    <link rel="stylesheet" href="/whole-stack-note/assets/css/0.styles.966634b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/whole-stack-note/" class="home-link router-link-active"><!----> <span class="site-name">FE 前端研究所</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/whole-stack-note/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端初级" class="dropdown-title"><span class="title">前端初级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>HTML / CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-base/" class="nav-link">HTML 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/html-pro/" class="nav-link">HTML5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-base/" class="nav-link">CSS 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/css-pro/" class="nav-link">CSS3 / CSS4</a></li></ul></li><li class="dropdown-item"><h4>JS 基础与进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/es-next/01 let 变量和 const 常量.html" class="nav-link">ES-Next</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/typescript/00 基础知识.html" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/jquery/" class="nav-link">JQuery</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/browser/DOM.html" class="nav-link">浏览器原理</a></li></ul></li><li class="dropdown-item"><h4>项目包管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/npm/" class="nav-link">NPM</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/yarn/" class="nav-link">YARN</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/package/learn/" class="nav-link">LEARN</a></li></ul></li><li class="dropdown-item"><h4>团队协作</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/code-format/" class="nav-link">代码规范</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p4/team/tools/" class="nav-link">开发工具链</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端中级" class="dropdown-title"><span class="title">前端中级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/h5/" class="nav-link">H5</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/uni-app/" class="nav-link">Uni-App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/react-native/" class="nav-link">React Native</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/fullter/" class="nav-link">Fullter</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/wechat/" class="nav-link">微信小程序</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/weex/" class="nav-link">Weex</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/mpvue/" class="nav-link">MpVue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/pwa/" class="nav-link">PWA</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/native-app/" class="nav-link">Native App</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/web-app/hybird-app/" class="nav-link">Hybird App</a></li></ul></li><li class="dropdown-item"><h4>开发框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-base/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/vue-element-admin/" class="nav-link">Vue-Element-Admin</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/react-base/" class="nav-link">React</a></li></ul></li><li class="dropdown-item"><h4>NodeJS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/node-base/" class="nav-link">Node 基础</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/express.html" class="nav-link">Express</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/node-js/koa.html" class="nav-link">Koa</a></li></ul></li><li class="dropdown-item"><h4>面试相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/business/" class="nav-link">业务开发</a></li><li class="dropdown-subitem"><a href="/whole-stack-note/p5/interview/topic/" class="nav-link">面试题</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/live/" class="nav-link">记录</a></li><li class="dropdown-item"><!----> <a href="/whole-stack-note/blog/economics/" class="nav-link">经济学</a></li></ul></div></div><div class="nav-item"><a href="/whole-stack-note/my-resume.html" class="nav-link">Resume</a></div> <a href="https://github.com/ErrorJe" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/whole-stack-note/p5/vue-base/" class="sidebar-link">Vue</a></li><li><a href="/whole-stack-note/p5/vue-base/01 Vue 基础.html" class="sidebar-link">Vue 基础（版本、生命周期与环境）</a></li><li><a href="/whole-stack-note/p5/vue-base/02 Vue 项目启动和基本配置.html" class="sidebar-link">Vue 项目启动和基本配置</a></li><li><a href="/whole-stack-note/p5/vue-base/03 Vue 核心语法.html" class="sidebar-link">Vue 核心语法</a></li><li><a href="/whole-stack-note/p5/vue-base/04 Vue 进阶语法.html" class="sidebar-link">Vue 进阶语法</a></li><li><a href="/whole-stack-note/p5/vue-base/05 Vue 组件基础.html" class="sidebar-link">Vue 组件基础</a></li><li><a href="/whole-stack-note/p5/vue-base/06 Vue 父子组件通信.html" class="sidebar-link">Vue 父子组件通信</a></li><li><a href="/whole-stack-note/p5/vue-base/07 Vue 跨层级组件通信.html" class="sidebar-link">Vue 跨层级组件通信</a></li><li><a href="/whole-stack-note/p5/vue-base/08 Vue 函数式组件和 JSX 应用.html" class="sidebar-link">Vue 函数式组件和 JSX 应用</a></li><li><a href="/whole-stack-note/p5/vue-base/09 Vue 过渡和动画.html" class="sidebar-link">Vue 过渡和动画</a></li><li><a href="/whole-stack-note/p5/vue-base/10 Vue-Cli 脚手架.html" class="sidebar-link">vue-cli 脚手架</a></li><li><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html" class="active sidebar-link">Vue-Router 路由器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#安装和介绍" class="sidebar-link">安装和介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#vue-router-解决的问题" class="sidebar-link">Vue-Router 解决的问题</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#路由的类型" class="sidebar-link">路由的类型</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#vue-router-安装" class="sidebar-link">Vue-Router 安装</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#基本配置" class="sidebar-link">基本配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#router-js对路由的配置" class="sidebar-link">router.js对路由的配置</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#路由的基本使用" class="sidebar-link">路由的基本使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#动态路由（路由传参）" class="sidebar-link">动态路由（路由传参）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#路由动态参数（必传参）和编程式路由" class="sidebar-link">路由动态参数（必传参）和编程式路由</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#查询参数传值" class="sidebar-link">查询参数传值</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#router-replace-路由返回" class="sidebar-link">router.replace() 路由返回</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#router-go-n" class="sidebar-link">router.go(n)</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#嵌套路由" class="sidebar-link">嵌套路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#创建登录页面（login）和父级页面（dashboard）" class="sidebar-link">创建登录页面（Login）和父级页面（Dashboard）</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#配置路由和更改url路径" class="sidebar-link">配置路由和更改url路径</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#命名视图" class="sidebar-link">命名视图</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#路由守卫" class="sidebar-link">路由守卫</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#全局路由守卫（程序级）" class="sidebar-link">全局路由守卫（程序级）</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#路由独享守卫（路由级）" class="sidebar-link">路由独享守卫（路由级）</a></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#组件级路由守卫" class="sidebar-link">组件级路由守卫</a></li></ul></li><li class="sidebar-sub-header"><a href="/whole-stack-note/p5/vue-base/11 Vue-Router 路由器.html#异步组件" class="sidebar-link">异步组件</a></li></ul></li><li><a href="/whole-stack-note/p5/vue-base/12 Vuex 状态管理器.html" class="sidebar-link">Vuex 状态管理器</a></li><li><a href="/whole-stack-note/p5/vue-base/13 Vant 项目.html" class="sidebar-link">Vant 项目</a></li><li><a href="/whole-stack-note/p5/vue-base/14 v-tooltip 中文文档翻译.html" class="sidebar-link">v-tooltip 中文文档翻译</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-router-路由器"><a href="#vue-router-路由器" class="header-anchor">#</a> Vue-Router 路由器</h1> <p>简单来说就是解析不同的url，去替换和渲染不同的页面</p> <p>传统的开发，不同的 URL 对应的是不同的页面，用户每次都要等待加载访问的时间。现在有了单页面应用，针对不同 URL 去映射不同的组件。</p> <blockquote><p>1 配置路由 <code>{path:'/login',component:Login}</code>
2 安放路由出口 router-view
3 导航链接 router-link
4 路由传参和获取
5 嵌套路由和路由守卫
嵌套路由 <code>{children:[]}</code> 注意父级路由要有路由出口
路由守卫：全局 <code>router.beforeEach</code>， 路由层级 <code>beforeEnter</code>， 组件层级 <code>beforeRouteEnter</code>
6 异步路由懒加载</p></blockquote> <h2 id="安装和介绍"><a href="#安装和介绍" class="header-anchor">#</a> 安装和介绍</h2> <h3 id="vue-router-解决的问题"><a href="#vue-router-解决的问题" class="header-anchor">#</a> Vue-Router 解决的问题</h3> <ul><li>监听URL变化，执行相应逻辑</li> <li>URL 是组件的映射</li> <li>多种 API 来操作 URL（哈希模式不刷新浏览器）</li></ul> <h3 id="路由的类型"><a href="#路由的类型" class="header-anchor">#</a> 路由的类型</h3> <ul><li>hash 模式：丑。无法使用锚点定位。（用#号）</li> <li>history 模式：需要后端配置。IE9不兼容（可用强制刷新处理）</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 只需要更改 Mode 模式就好了</span>
routes<span class="token operator">:</span> <span class="token punctuation">[</span>
  mode<span class="token operator">:</span>history<span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">'/page1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="vue-router-安装"><a href="#vue-router-安装" class="header-anchor">#</a> Vue-Router 安装</h3> <p>在cli3之前使用命令 <code>npm i vue-router --save</code>来安装</p> <p>如果是使用 vue-cli3， 可以直接以安装插件的形式 <code>vue add router</code></p> <blockquote><p>会询问是否使用 history 模式的 router 这里，可以选择 no。直接安装
注意使用这种方式安装的插件，会将插件特性覆盖 App.vue，所以要回退一下。
最后在源码根目录下会多一个 <code>router.js</code></p></blockquote> <h2 id="基本配置"><a href="#基本配置" class="header-anchor">#</a> 基本配置</h2> <blockquote><p>路由的基本表现就是无刷新，底层是通过DOM的移除和重新渲染加载来实现的。
在配置每个页面的路由之前，那个页面也需要存在。所以假设这里新建了页面 Page1.vue和Page2.vue</p></blockquote> <h3 id="router-js对路由的配置"><a href="#router-js对路由的配置" class="header-anchor">#</a> router.js对路由的配置</h3> <blockquote><p>1 引入相关页面 import，可以使用相对路径或者是绝对路径(@)。建议后者
2 挂载路由插件 Vue.use()，初始化路由实例new Router()
3 更改模式，默认模式是哈希模式(/#)， 下面更改为 history 模式(路由的history模式也不会刷新)
4 配置首页，使用重定向
5 配置各个页面路由的Url和指定页面</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// router.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Router <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token comment">// 1 两种页面引入方式 @指向源代码目录 也就是src目录</span>
<span class="token keyword">import</span> Page1 <span class="token keyword">from</span> <span class="token string">'./views/Page1.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Page2 <span class="token keyword">from</span> <span class="token string">'@/views/Page2.vue'</span><span class="token punctuation">;</span>

<span class="token comment">// 2 插件引入后的挂载方式</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Router<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// history模式，url就不会有 /# 这样的哈希模式。对SEO比较好，可读性也强</span>
  <span class="token comment">// 但是这个模式需要服务器配合，也就是url域名部分要全部指定</span>
  <span class="token comment">// 现在更加建议使用 history 模式</span>
  mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>

  <span class="token comment">// 3 这里是配置路由。区别于路由器 Router</span>
  <span class="token comment">// 4 在主页面还需要有一个路由入口 &lt;router-vie&gt;&lt;/router-vie&gt;</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 默认首页，重定向到 page1</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">'/page1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/page1'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Page1
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/page2'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Page2
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="路由的基本使用"><a href="#路由的基本使用" class="header-anchor">#</a> 路由的基本使用</h3> <h4 id="挂载到全局"><a href="#挂载到全局" class="header-anchor">#</a> 挂载到全局</h4> <p>首先需要在 <code>main.js</code> 中去注册这个选项</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">new</span>  <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router<span class="token punctuation">,</span> <span class="token comment">// 挂载到实例</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span><span class="token parameter">h</span><span class="token operator">=&gt;</span><span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="router-view-路由视口和-router-link-路由导航"><a href="#router-view-路由视口和-router-link-路由导航" class="header-anchor">#</a> router-view 路由视口和 router-link 路由导航</h4> <blockquote><p>可以通过路由视图器来作为路由入口展现 <code>router-view</code>
也可以通过<code>router-link</code>路由导航来跳转，相当于超链接 a 标签</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code>// App.vue
<span class="token comment">&lt;!-- 路由方式1：航，就是 a 标签 --&gt;</span>
<span class="token comment">&lt;!-- 底层是对DOM的移除和重新渲染，也就是所谓的不刷新 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/page1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/page2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 路由方式2:入口，视图器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>还可以在链接路由中直接增加参数</p> <blockquote><p>这里将路由跳转的所有信息都携带了， 不需要另外写 JS
name，路由目的地，目标组件名
query，传参对象。就是路径参数。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'news.detail', query:{id: news.id}}&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="vue-config-js-配置"><a href="#vue-config-js-配置" class="header-anchor">#</a> vue.config.js 配置</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 就是个 node 代码</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 项目的上下文。也可以在 creat New Router 里配置 base 选项</span>
  publicPath<span class="token operator">:</span><span class="token string">'/wjy'</span><span class="token punctuation">,</span> 
  <span class="token comment">// 本地服务器, express 接口</span>
  configureWebpack<span class="token operator">:</span><span class="token punctuation">{</span>
    devServer<span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 本地访问 localhost:8080/goods 就相当于请求了这个接口</span>
        app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/goods'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> text<span class="token operator">:</span><span class="token string">'2'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> text<span class="token operator">:</span><span class="token string">'3'</span><span class="token punctuation">}</span>
          <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="动态路由（路由传参）"><a href="#动态路由（路由传参）" class="header-anchor">#</a> 动态路由（路由传参）</h2> <blockquote><p>配置路由时，可以通过冒号 : 来写一个占位符，就是以后给参数放的。
传参的方式:
1 可以直接改写URL传参。地址栏改或 <code>&lt;router-link to=&quot;/page1/bar2&quot;&gt;goto&lt;/router-link&gt;</code>
2 还有使用props属性来进行静态、动态、方法的传参。<code>props:{foo:'bar'}</code>
3 还有指令的方式:<code>this.$router.push({name:'page2', params:{id:1, msg:'vuejs'}})</code>，这里用到命名路由配置name。
获取参数的方式:
<code>params</code>是路径参数 <code>xxx/yyy/zzzz</code>， <code>query</code>是查询参数，也就是 <code>xxx/?a=2</code>
可以直接在<code></code>或<code></code>。
或者指令取参数<code>this.$route.params.msg</code>或<code>this.$route.query.foo</code></p></blockquote> <h3 id="路由动态参数（必传参）和编程式路由"><a href="#路由动态参数（必传参）和编程式路由" class="header-anchor">#</a> 路由动态参数（必传参）和编程式路由</h3> <h4 id="指令式路由-to-和占位符参数"><a href="#指令式路由-to-和占位符参数" class="header-anchor">#</a> 指令式路由 to 和占位符参数</h4> <blockquote><p>形式就是 www.baidu.com/xxx/xxx， 后面的 /xxx 就是必传参，如果不传，那无法找到指定页面
使用 <code>/:xxxx</code>占位符， 用 <code>this.$route.params</code> 拿到响应的路径必传参
如果设置了 <code>props = true</code>， 那么这个必传参会直接作为该组件 props 中的变量</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// router.js 路由配置</span>
routes<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span><span class="token string">'/page1/:foo'</span><span class="token punctuation">,</span> <span class="token comment">// 通过占位符，Url路径的参数。</span>
    component<span class="token operator">:</span>Page1<span class="token punctuation">,</span>
    <span class="token comment">// 将占位符全部传给组件作为props。就像是给子组件传值一样。就不用调用router 的api去拿值了</span>
    props<span class="token operator">:</span> <span class="token boolean">true</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 也可以静态传值，但是用处不大</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/static'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Page1<span class="token punctuation">,</span>
    props<span class="token operator">:</span><span class="token punctuation">{</span>foo<span class="token operator">:</span><span class="token string">'bar'</span><span class="token punctuation">}</span> <span class="token comment">// 静态传参，由组件的 props接收</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 路由使用 App.vue， 导航式路由 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/page1/bar2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> 

// 如果使用按钮去跳转，可能会用到 @click.prevent.stop=&quot;fn&quot; 取消默认行为
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Page1.vue 获取路由参数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
      foo<span class="token operator">:</span><span class="token punctuation">{</span>
        type<span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="this-router-push-编程式路由"><a href="#this-router-push-编程式路由" class="header-anchor">#</a> this.$router.push 编程式路由</h4> <blockquote><p>另外，除了在URL中直接修改，还可以使用按钮之类的写指令逻辑来跳转和传值
<code>this.$router.push</code>就是编程式路由。参数是字符串路径，或地址对象</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;gotoPage2()&quot;</span><span class="token operator">&gt;</span>跳转至Page2<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 指令形式传参。这种形式比较灵活</span>
  <span class="token function">gotoPage2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// params中的参数要和占位符名相同。这里的 id 和 msg 都需要在router.js 进行占位符配置，name 也是要配置。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'page2'</span><span class="token punctuation">,</span> params<span class="token operator">:</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> msg<span class="token operator">:</span><span class="token string">'vuejs'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>关于 <code>router.push()</code>的用法总结</p> <blockquote><p>注意 query 是跟 Path， params 跟 name 来使用的</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1 字符串路径</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/page2'</span><span class="token punctuation">)</span>
<span class="token comment">// 2 对象路径</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/page2'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 3 带参数的命名路由（必传参） /page2/1/vuejs， 对应配置时 /pages/:id/:msg</span>
<span class="token comment">// 注意不能和 path 混写，params 会被覆盖</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'page2'</span><span class="token punctuation">,</span> params<span class="token operator">:</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> msg<span class="token operator">:</span><span class="token string">'vuejs'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 4 带查询参数 /page2?id=1&amp;msg=vuejs</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/page2'</span><span class="token punctuation">,</span> query<span class="token operator">:</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> msg<span class="token operator">:</span><span class="token string">'vuejs'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>也可以通过指令的方式获取</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 动态路由参数的获取:占位符。可读性强，必传参，指定页面地址。</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// bar</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="查询参数传值"><a href="#查询参数传值" class="header-anchor">#</a> 查询参数传值</h3> <blockquote><p>一次性获取路由参数和查询参数</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// router.js </span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>params<span class="token punctuation">,</span> query<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用到 es6 解构</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> params<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    msg<span class="token operator">:</span> params<span class="token punctuation">.</span>msg<span class="token punctuation">,</span>
    foo<span class="token operator">:</span> query<span class="token punctuation">.</span>foo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/page2/:id/:msg'</span><span class="token punctuation">,</span> <span class="token comment">// :msg 占位符，路径参数</span>
      name<span class="token operator">:</span> <span class="token string">'page2'</span><span class="token punctuation">,</span> <span class="token comment">// 指令式切换路由用到</span>
      component<span class="token operator">:</span> Page2<span class="token punctuation">,</span>
      props<span class="token operator">:</span> fn <span class="token comment">// 直接传函数，一次性将路由和参训参数都传递。目标组件可以通过 props 选项拿到</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- url动态传参和查询传参方式 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/page2/1/vuejs?foo=bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Page2.vue</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 获取路由参数 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>msg<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>id<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>foo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> props 属性方式直接用 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>msg<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>id<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>foo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>foo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 动态路由参数的获取:占位符。可读性强，必传参，指定页面地址。</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
    <span class="token comment">// 查询参数的获取</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>foo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="router-replace-路由返回"><a href="#router-replace-路由返回" class="header-anchor">#</a> router.replace() 路由返回</h3> <blockquote><p>替换掉当前的 history 记录</p></blockquote> <p>基本用法其实和 <code>push</code> 是一样的，只是导航后不会留下 history 记录</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>可以直接用 <code>router-link</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">replace</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>push 方法也是可以的</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//push方法也可以传replace</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="router-go-n"><a href="#router-go-n" class="header-anchor">#</a> router.go(n)</h3> <blockquote><p>参数是整数， 在 history 记录中前进或后退多少步，跟<code>window.history.go(n)</code>一样</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 在浏览器记录中前进一步，等同于 history.forward()</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 后退一步记录，等同于 history.back()</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 前进 3 步记录</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// 如果 history 记录不够用，那就会失败</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h2> <blockquote><p>应用场景，如必须先登录 login, 然后才能访问其下面的其他子路由</p></blockquote> <h3 id="创建登录页面（login）和父级页面（dashboard）"><a href="#创建登录页面（login）和父级页面（dashboard）" class="header-anchor">#</a> 创建登录页面（Login）和父级页面（Dashboard）</h3> <blockquote><p>父级路由页面，必须要有路由出口<code>router-view</code>给子路由展示的地方</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Dashboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 父级路由必须有一个路由出口，负责显示子路由 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="配置路由和更改url路径"><a href="#配置路由和更改url路径" class="header-anchor">#</a> 配置路由和更改url路径</h3> <blockquote><p>将之前写的路由，都作为子路由放进父级路由 Dashboard 中。需要注意：
children属性中的子路由 path 需要改成相对于父级的路径。去掉 '/'
之前的其他路径前面都需要加上 /dashboard</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// router.js 配置路由</span>
<span class="token keyword">import</span> Dashboard <span class="token keyword">from</span> <span class="token string">'@/views/Dashboard.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">'@/views/Login.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> notFound <span class="token keyword">from</span> <span class="token string">'@/views/404.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      redirect<span class="token operator">:</span> <span class="token string">'/dashboard/page1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Dashboard<span class="token punctuation">,</span>
      <span class="token comment">// 注意，这里子路由的地址要相对地址</span>
      <span class="token comment">// 嵌套路由，需要注意，在每层的父组件中需要额外增加 &lt;router-view&gt; 路由视口</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">'page1/:foo'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> Page1<span class="token punctuation">,</span>
          props<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 路由的组件传参</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> Page1<span class="token punctuation">,</span>
          props<span class="token operator">:</span> <span class="token punctuation">{</span>
            foo<span class="token operator">:</span> <span class="token string">'bar'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">'page2/:id/:msg'</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">'page2'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> Page2<span class="token punctuation">,</span>
          props<span class="token operator">:</span> fn 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Login
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 404 组件</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span><span class="token operator">*</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span>notFound<span class="token punctuation">,</span>
      component<span class="token operator">:</span>notFound
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--注意父级路径的写法--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/dashboard/static<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>static<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/dashboard/page1/bar2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/dashboard/page2/1/vuejs?foo=bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
<span class="token comment">&lt;!-- 登录页面 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="命名视图"><a href="#命名视图" class="header-anchor">#</a> 命名视图</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 命名视图。当该组件需要出现多个视口时使用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>wjy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在写路由的时候，要注意是复数的 <code>components</code> 配置默认或对应视口名字的路由组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span><span class="token string">'/a'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span><span class="token string">'pageA'</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token keyword">default</span><span class="token operator">:</span> pageA<span class="token punctuation">,</span> <span class="token comment">// 没有命名的路由视口，去渲染 pageA 组件</span>
    wjy<span class="token operator">:</span> Test <span class="token comment">// 指定名字的路由视口， 去渲染 Test 组件</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="路由守卫"><a href="#路由守卫" class="header-anchor">#</a> 路由守卫</h2> <h3 id="全局路由守卫（程序级）"><a href="#全局路由守卫（程序级）" class="header-anchor">#</a> 全局路由守卫（程序级）</h3> <h4 id="全局守卫生命周期"><a href="#全局守卫生命周期" class="header-anchor">#</a> 全局守卫生命周期</h4> <blockquote><p>全局路由守卫就是，每次路由跳转都会被触发，即任何路由的请求都会被拦截
需要改写 router.js ，去配置路由守卫。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1 全局前置守卫 —— 当进入某个路由之前，用于数据校验过程</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 假设没有登录时，回到登录页面</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2 跳转中守卫 —— 就是时间上比 beforeEach 晚一点</span>
router<span class="token punctuation">.</span><span class="token function">beforeResolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3 全局后置守卫 —— 没有 next 因为是路由结束了</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="登录路由守卫"><a href="#登录路由守卫" class="header-anchor">#</a> 登录路由守卫</h4> <blockquote><p>判断是否登录，如果登录了就允许访问其他子路由。如果没有登录就去登录页面</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1 将路由配置作为常量</span>
<span class="token keyword">const</span> router <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      redirect<span class="token operator">:</span> <span class="token string">'/dashboard/page1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Dashboard<span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">'page1/:foo'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> Page1<span class="token punctuation">,</span>
          props<span class="token operator">:</span> <span class="token boolean">true</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> Page1<span class="token punctuation">,</span>
          props<span class="token operator">:</span> <span class="token punctuation">{</span>
            foo<span class="token operator">:</span> <span class="token string">'bar'</span>
          <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">'page2/:id/:msg'</span><span class="token punctuation">,</span> 
          name<span class="token operator">:</span> <span class="token string">'page2'</span><span class="token punctuation">,</span> 
          component<span class="token operator">:</span> Page2<span class="token punctuation">,</span>
          props<span class="token operator">:</span> fn 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> Login
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2 配置路由守卫 - 判断登录</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">!=</span> <span class="token string">'/login'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 访问其他页面，要求登录</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 一般讲状态放在 vuex 中</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 是登录状态，则允许访问</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'./login?redirect='</span><span class="token operator">+</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token comment">// 去登录页</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 登录页面允许</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 3 导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre></div><h4 id="登录跳转实现"><a href="#登录跳转实现" class="header-anchor">#</a> 登录跳转实现</h4> <blockquote><p>login 登录页面假设做了登录处理</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 登录成功</span>
        window<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token comment">// 取到回跳路径</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>redirect<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query <span class="token operator">||</span> <span class="token string">'/'</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>redirect<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 有回跳地址就去哪</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>redirect<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 否则去首页</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="路由独享守卫（路由级）"><a href="#路由独享守卫（路由级）" class="header-anchor">#</a> 路由独享守卫（路由级）</h3> <blockquote><p>如果在 Dashboard 这个父级路由中写了，那之前的全局路由守卫只需要写 <code>next()</code>就行了。
触发的时间在 <code>beforeEach</code> 和 <code>beforeResolve</code> 之间</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>router<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">'/dashboard'</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> Dashboard<span class="token punctuation">,</span>
  
  <span class="token comment">// 路由级别的守卫</span>
  <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 一般讲状态放在 vuex 中</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 是登录状态，则允许访问</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'./login?redirect='</span><span class="token operator">+</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token comment">// 去登录页</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="组件级路由守卫"><a href="#组件级路由守卫" class="header-anchor">#</a> 组件级路由守卫</h3> <blockquote><p>还有组件级别的守卫。在这个层级，只能管自己页面的拦截。
下面三个生命钩子，是写在组件内部的。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Page1.vue</span>
<span class="token comment">// 1 组件实例创建之前 —— 所以无法使用 this 去得到该组件实例</span>
<span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2 还有一个组件守卫非常常用, 可以监听参数变化</span>
<span class="token comment">// 如 /pageA/1 和 /pageA/2 都是访问 pageA 组件，但是参数是有变化的。就在此时触发 </span>
<span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 仅路由参数发生变化时触发， 如 page/vue, page/react</span>
<span class="token punctuation">}</span>
<span class="token comment">// 利用 watch 也可以监听</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">$route</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3 导航离开该组件时触发</span>
<span class="token comment">// 用于禁止用户保存之前的突然离开。用 next(false) 来取消离开行为</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h4 id="路由守卫的调用顺序"><a href="#路由守卫的调用顺序" class="header-anchor">#</a> 路由守卫的调用顺序</h4> <pre><code>调用全局 beforeEach&lt;br /&gt;	重用组件中调用 beforeRouteUpdate,（仅参数更改）&lt;br /&gt;	路由配置里调用 beforeEnter&lt;br /&gt;	激活的组件里调用 beforeRouteEnter&lt;br /&gt;	调用全局的 beforeResolve， 导航被确认&lt;br /&gt;	调用全局 afterEach 钩子&lt;br /&gt;		router.afterEach((to, form) =&gt; {}), 注意后面已经没有东西了，所以没有Next&lt;br /&gt;	触发 DOM 更新
</code></pre> <h4 id="beforerouterenter-和-beforerouterleave-应用实例"><a href="#beforerouterenter-和-beforerouterleave-应用实例" class="header-anchor">#</a> beforeRouterEnter 和 beforeRouterLeave 应用实例</h4> <blockquote><p>监听浏览器返回跳转到指定页面</p></blockquote> <p>页面进来时，先保存源头的路由名</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> vm<span class="token punctuation">.</span>backRouterToName <span class="token operator">=</span> <span class="token keyword">from</span><span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><p>离开该页面时，通过判断跳转到指定页面</p> <blockquote><p>需要注意，这个方法，每次调用 next('xxx') 会重新触发该钩子，所以在一开始还要判断一些条件让其通过，不然会死循环
注意一个 case 里不能写 || &amp;&amp; 这样的判断，只能有一个简单值</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> patSn <span class="token operator">=</span> <span class="token keyword">from</span><span class="token punctuation">.</span>query<span class="token punctuation">.</span>patSn <span class="token operator">?</span> <span class="token keyword">from</span><span class="token punctuation">.</span>query<span class="token punctuation">.</span>patSn <span class="token operator">:</span> <span class="token string">'isHistoryGo'</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    <span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>patSn <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backRouterToName <span class="token operator">!==</span> <span class="token string">'modifyChiefComplaint'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
    <span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">.</span>patSn <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backRouterToName <span class="token operator">!==</span> <span class="token string">'modifyQueryResult'</span><span class="token punctuation">)</span> <span class="token operator">||</span>
    to<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'hosInquiry'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>backRouterToName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'modifyChiefComplaint'</span><span class="token operator">:</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'patientList'</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> patSn <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">'modifyQueryResult'</span><span class="token operator">:</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'patientList'</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> patSn <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">'patientList'</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backRouterToName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'patDetail'</span><span class="token punctuation">)</span><span class="token operator">:</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backRouterToName<span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> patSn <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'返回判断异常&gt;&gt;&gt;'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>backRouterToName<span class="token punctuation">)</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="异步组件"><a href="#异步组件" class="header-anchor">#</a> 异步组件</h2> <blockquote><p>路由懒加载函数， vue 配合 webpack 实现。不需要另外引入组件。
如果不访问这个路由，就不会发生加载。可以把主页之外的都设置为懒加载。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./components/Login'</span><span class="token punctuation">)</span> <span class="token comment">// 函数形式导入组件</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">1/14/2020, 1:11:45 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/whole-stack-note/p5/vue-base/10 Vue-Cli 脚手架.html" class="prev">vue-cli 脚手架</a></span> <span class="next"><a href="/whole-stack-note/p5/vue-base/12 Vuex 状态管理器.html">Vuex 状态管理器</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/whole-stack-note/assets/js/app.6bc873a4.js" defer></script><script src="/whole-stack-note/assets/js/2.6d170185.js" defer></script><script src="/whole-stack-note/assets/js/78.c3504544.js" defer></script>
  </body>
</html>
